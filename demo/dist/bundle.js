!function(t,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var e=r();for(var o in e)("object"==typeof exports?exports:t)[o]=e[o]}}(window,function(){return function(t){var r={};function e(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=9)}([function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,n=e(7),i=e(6),s=e(5),a=e(4);!function(t){t.BINARY="BINARY",t.RELU="RELU",t.SIGMOIDAL="SIGMOIDAL",t.HYPERBOLIC_TANGENT="HYPERBOLIC_TANGENT"}(o=r.ActivationFunctionType||(r.ActivationFunctionType={}));var c=function(){function t(t){void 0===t&&(t=o.BINARY),this.default=t}return t.process=function(r,e){return new t(e).process(r)},t.prototype.process=function(t){var r,e=((r={})[o.BINARY]=a.binary,r[o.RELU]=i.reLU,r[o.SIGMOIDAL]=n.sigmoidal,r[o.HYPERBOLIC_TANGENT]=s.hyperbolicTangent,r);return e[t]||e[this.default]},t}();r.ActivationFunction=c},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e(8);r.LIMIT_ERRORS=8e3;var n=function(){function t(t,r){this.rangeWeight={MIN:-5,MAX:4.9},this.counterErrors=0,this.hasError=!1,this.weights=null,this.funcBack=t||function(){},this.activationFunction=r,this.synapticProcessor=new o.SynapticProcessor(r),this.dataStack=[]}return t.prototype.addData=function(t,r){return this.dataStack.push([t,r]),this},t.prototype.learn=function(){this.weights||this.assignWeights(),this.hasError=!1;for(var t=0;t<this.dataStack.length;t++)this.synapticProcessor.setData(this.dataStack[t][0]).setExpectedOutput(this.dataStack[t][1]).calculateSynapses(this.weights).calculateError(),0!==this.synapticProcessor.error&&(this.synapticProcessor.recalculateWeights(this.weights),this.hasError=!0,this.funcBack());if(this.hasError){if(this.counterErrors++,this.counterErrors>=r.LIMIT_ERRORS)throw this.counterErrors=0,Error("Maximum error limit reached");return this.learn()}return this.counterErrors=0,this},t.prototype.process=function(t){return this.synapticProcessor.setData(t).calculateSynapses(this.weights).output()},t.prototype.setWeights=function(t){return this.weights=t,this},t.prototype.setActivationFunction=function(t){return this.activationFunction=t,this},t.prototype.createWeight=function(){for(var t=0,r=this.rangeWeight.MAX-this.rangeWeight.MIN;!t;)t=parseFloat((Math.random()*r+this.rangeWeight.MIN).toFixed(4));return t},t.prototype.assignWeights=function(){for(var t=this.dataStack[0][0].length,r=new Array(t),e=0;e<t;e++)r[e]=this.createWeight();return this.setWeights(r),this.synapticProcessor.threshold=this.createWeight(),this.funcBack(),this},t}();r.Perceptron=n},function(t,r,e){"use strict";var o,n=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])},function(t,r){function e(){this.constructor=t}o(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(r,"__esModule",{value:!0});var i=e(0),s=function(t){function r(r){void 0===r&&(r=!1);var e=t.call(this,null,i.ActivationFunctionType.SIGMOIDAL)||this;return e.isHidden=r,e.error=0,e.outputNeurons=[],e.inputNeurons=[],e}return n(r,t),r.prototype.learn=function(){this.weights||this.assignWeights();for(var t=0;t<this.dataStack.length;t++)this.synapticProcessor.setData(this.dataStack[t][0]).setExpectedOutput(this.dataStack[t][1]).calculateSynapses(this.weights);return this},r.prototype.backpropagation=function(){this.inputNeurons.forEach(function(t,r){t.calculateHiddenError(r)}),this.inputNeurons.length>0&&this.inputNeurons[0].backpropagation()},r.prototype.recalculateWeights=function(){this.synapticProcessor.updateThreshold(this.synapticProcessor.error);for(var t=0;t<this.weights.length;t++)this.weights[t]+=this.synapticProcessor.learningRate*this.synapticProcessor.data[t]*this.synapticProcessor.delta,this.weights[t]=parseFloat(this.weights[t].toFixed(4))},r.prototype.output=function(){return this.synapticProcessor.output()},r.prototype.calculateHiddenError=function(t){var r=0;return this.outputNeurons.forEach(function(e){r+=e.weights[t]*e.synapticProcessor.delta}),this.synapticProcessor.calculateErrorDerivated(r),this.recalculateWeights(),this},r}(e(1).Perceptron);r.Neuron=s},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e(2),n=function(){function t(){this.layers=[],this.error=0,this.funcionActivacion="sigmoidal",this.counterErrors=0,this.LIMIT_ERRORS=2500}return t.prototype.forwardpropagation=function(t){var r=t.input,e=t.output,o=[],n=r;return this.layers.forEach(function(t){o.length>0&&(n=o,o=[]),t.forEach(function(t){t.addData(n,e).learn(),o.push(t.output())})}),this},t.prototype.backpropagation=function(){var t=this.layers.length-1;this.layers[t].forEach(function(t){t.synapticProcessor.calculateError(),t.error=t.synapticProcessor.error,t.synapticProcessor.calculateErrorDerivated(t.error),t.error=t.synapticProcessor.delta,t.error>=1e-4&&(console.log(t.synapticProcessor.delta),t.recalculateWeights()),t.backpropagation()})},t.prototype.learn=function(t){var r=this,e=function(){var e=0;t.forEach(function(t){r.forwardpropagation(t),r.backpropagation(),r.layers.forEach(function(t){t.forEach(function(t){e+=t.error*t.error})}),e/=2}),e>=r.error&&r.layers.forEach(function(t){t.forEach(function(t){t.synapticProcessor.learningRate-=.01})}),r.setError(parseFloat(e.toString()).toFixed(4))};for(e();this.error>.001;){if(this.counterErrors++,console.log(this.error,this.counterErrors),this.counterErrors>=this.LIMIT_ERRORS)return this;e()}return this.counterErrors=0,this},t.prototype.addLayer=function(t){var r=this.createLayer(t),e=this.layers.push(r)-1,o=this.layers[e-1];return void 0===o?this:(r.forEach(function(t){t.inputNeurons=o}),o.forEach(function(t){t.outputNeurons=r}),this)},t.prototype.process=function(t){var r=[];return this.layers.forEach(function(e){r.length>0&&(t=r,r=[]),e.forEach(function(e){r.push(e.process(t))})}),r.map(function(t){return Math.round(t)})},t.prototype.setError=function(t){return this.error=t,this},t.prototype.createLayer=function(t){for(var r=[],e=this.layers.length>0,n=0;n<t;n++)r[n]=new o.Neuron(e);return r},t}();r.Backpropagation=n},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.binary=function(t){return t>=0?1:0}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hyperbolicTangent=function(t){return Math.tanh(t)}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.reLU=function(t){return t>=0?t:0}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sigmoidal=function(t){return 1/(1+Math.pow(Math.E,-t))}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e(0),n=function(){function t(t,r,e){void 0===r&&(r=null),void 0===e&&(e=null),this.learningRate=.025,this.error=0,this.activationFunction=t,this.setExpectedOutput(e),this.setData(r)}return t.prototype.output=function(){return o.ActivationFunction.process(this.activationFunction)(this.synapse)},t.prototype.recalculateWeights=function(t){var r=this.expectedOutput-this.output();this.updateThreshold(r),this.calculateDelta(r);for(var e=0;e<t.length;e++)t[e]+=this.data[e]*this.delta},t.prototype.updateThreshold=function(t){this.threshold-=this.learningRate*t},t.prototype.calculateDelta=function(t){return this.delta=this.learningRate*t,this},t.prototype.calculateSynapses=function(t){this.synapse=0;for(var r=0;r<t.length;r++)this.synapse+=this.data[r]*t[r];return this.synapse+=this.threshold,this},t.prototype.calculateError=function(){return this.error=this.expectedOutput-this.output(),this},t.prototype.calculateErrorDerivated=function(t){var r=this.output(),e=r-r*r;return this.delta=t*e,this},t.prototype.setData=function(t){return null===t?this:(this.data=t.slice(),this)},t.prototype.setExpectedOutput=function(t){return this.expectedOutput=t,this},t.prototype.setLearningFactor=function(t){return this.learningRate=t,this},t}();r.SynapticProcessor=n},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e(1);r.Perceptron=o.Perceptron;var n=e(3);r.Backpropagation=n.Backpropagation}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vLi9zcmMvYWN0aXZhdGlvbi1mdW5jdGlvbnMvYWN0aXZhdGlvbi1mdW5jdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGVyY2VwdHJvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbmV1cm9uLnRzIiwid2VicGFjazovLy8uL3NyYy9iYWNrcHJvcGFnYXRpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGl2YXRpb24tZnVuY3Rpb25zL2JpbmFyeS5mdW5jdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWN0aXZhdGlvbi1mdW5jdGlvbnMvaHlwZXJib2xpYy10YW5nZW50LmZ1bmN0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9hY3RpdmF0aW9uLWZ1bmN0aW9ucy9yZWx1LmZ1bmN0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9hY3RpdmF0aW9uLWZ1bmN0aW9ucy9zaWdtb2lkYWwuZnVuY3Rpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N5bmFwdGljLXByb2Nlc3Nvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwiYSIsImkiLCJ3aW5kb3ciLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkFjdGl2YXRpb25GdW5jdGlvblR5cGUiLCJzaWdtb2lkYWxfZnVuY3Rpb25fMSIsInJlbHVfZnVuY3Rpb25fMSIsImh5cGVyYm9saWNfdGFuZ2VudF9mdW5jdGlvbl8xIiwiYmluYXJ5X2Z1bmN0aW9uXzEiLCJBY3RpdmF0aW9uRnVuY3Rpb24iLCJmdW5jdGlvbk5hbWUiLCJCSU5BUlkiLCJ0aGlzIiwiZGVmYXVsdCIsInByb2Nlc3MiLCJkZWZhdWx0RnVuY3Rpb24iLCJjYWxsYmFjayIsIl9hIiwiYmluYXJ5IiwiUkVMVSIsInJlTFUiLCJTSUdNT0lEQUwiLCJzaWdtb2lkYWwiLCJIWVBFUkJPTElDX1RBTkdFTlQiLCJoeXBlcmJvbGljVGFuZ2VudCIsInN5bmFwdGljX3Byb2Nlc3Nvcl8xIiwiTElNSVRfRVJST1JTIiwiUGVyY2VwdHJvbiIsImFjdGl2YXRpb25GdW5jdGlvbiIsInJhbmdlV2VpZ2h0IiwiTUlOIiwiTUFYIiwiY291bnRlckVycm9ycyIsImhhc0Vycm9yIiwid2VpZ2h0cyIsImZ1bmNCYWNrIiwic3luYXB0aWNQcm9jZXNzb3IiLCJTeW5hcHRpY1Byb2Nlc3NvciIsImRhdGFTdGFjayIsImFkZERhdGEiLCJkYXRhIiwib3V0cHV0IiwicHVzaCIsImxlYXJuIiwiYXNzaWduV2VpZ2h0cyIsImxlbmd0aCIsInNldERhdGEiLCJzZXRFeHBlY3RlZE91dHB1dCIsImNhbGN1bGF0ZVN5bmFwc2VzIiwiY2FsY3VsYXRlRXJyb3IiLCJlcnJvciIsInJlY2FsY3VsYXRlV2VpZ2h0cyIsIkVycm9yIiwic2V0V2VpZ2h0cyIsInNldEFjdGl2YXRpb25GdW5jdGlvbiIsImNyZWF0ZVdlaWdodCIsIndlaWdodCIsInJhbmdlIiwicGFyc2VGbG9hdCIsIk1hdGgiLCJyYW5kb20iLCJ0b0ZpeGVkIiwiZGF0YVNpemUiLCJBcnJheSIsInRocmVzaG9sZCIsImFjdGl2YXRpb25fZnVuY3Rpb25fMSIsIk5ldXJvbiIsIl9zdXBlciIsImlzSGlkZGVuIiwiX3RoaXMiLCJvdXRwdXROZXVyb25zIiwiaW5wdXROZXVyb25zIiwiX19leHRlbmRzIiwiYmFja3Byb3BhZ2F0aW9uIiwiZm9yRWFjaCIsIm5ldXJvbiIsIm5ldXJvbkluZGV4IiwiY2FsY3VsYXRlSGlkZGVuRXJyb3IiLCJ1cGRhdGVUaHJlc2hvbGQiLCJsZWFybmluZ1JhdGUiLCJkZWx0YSIsInN1bUVycm9yIiwiY2FsY3VsYXRlRXJyb3JEZXJpdmF0ZWQiLCJuZXVyb25fMSIsIkJhY2twcm9wYWdhdGlvbiIsImxheWVycyIsImZ1bmNpb25BY3RpdmFjaW9uIiwiZm9yd2FyZHByb3BhZ2F0aW9uIiwiaW5wdXQiLCJvdXRwdXRzIiwibGF5ZXIiLCJpbmRleE91dHB1dExheWVyIiwiY29uc29sZSIsImxvZyIsImRhdGFzIiwibGVhcm5DYWxsYmFjayIsInN1bUVycm9ycyIsInNldEVycm9yIiwidG9TdHJpbmciLCJhZGRMYXllciIsIm51bWJlck5ldXJvbnMiLCJjcmVhdGVMYXllciIsImluZGV4TmV3TGF5ZXIiLCJiZWZvcmVMYXllciIsInVuZGVmaW5lZCIsIm1hcCIsInJvdW5kIiwic3luYXBzZSIsInRhbmgiLCJwb3ciLCJFIiwiZXhwZWN0ZWRPdXRwdXQiLCJjYWxjdWxhdGVEZWx0YSIsImZhY3RvckRlbHRhIiwiZXJyb3JDb21wbGVtZW50Iiwic2xpY2UiLCJzZXRMZWFybmluZ0ZhY3RvciIsImxlYXJuaW5nRmFjdG9yIiwicGVyY2VwdHJvbl8xIiwiYmFja3Byb3BhZ2F0aW9uXzEiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0Esb0JBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELFNBQ0Esc0JBQUFHLGVBQUFDLElBQ0FELFVBQUFILE9BQ0EsQ0FDQSxJQUFBSyxFQUFBTCxJQUNBLFFBQUFNLEtBQUFELEdBQUEsaUJBQUFKLGdCQUFBRixHQUFBTyxHQUFBRCxFQUFBQyxJQVBBLENBU0NDLE9BQUEsV0FDRCxtQkNUQSxJQUFBQyxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUs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QyxNQUFRdEMsS0FBS21HLGVBQWlCbkcsS0FBSzZCLFNBRWpDN0IsTUFHWHlCLEVBQUFyQyxVQUFBa0Ysd0JBQUEsU0FBd0IrQixHQUNwQixJQUFJeEUsRUFBUzdCLEtBQUs2QixTQUNkeUUsRUFBa0J6RSxFQUFTQSxFQUFTQSxFQUl4QyxPQUZBN0IsS0FBS29FLE1BQVFpQyxFQUFjQyxFQUVwQnRHLE1BR1h5QixFQUFBckMsVUFBQThDLFFBQUEsU0FBUU4sR0FDSixPQUFhLE9BQVRBLEVBQ081QixNQUdYQSxLQUFLNEIsS0FBT0EsRUFBSzJFLFFBRVZ2RyxPQUdYeUIsRUFBQXJDLFVBQUErQyxrQkFBQSxTQUFrQmdFLEdBR2QsT0FGQW5HLEtBQUttRyxlQUFpQkEsRUFFZm5HLE1BR1h5QixFQUFBckMsVUFBQW9ILGtCQUFBLFNBQWtCQyxHQUdkLE9BRkF6RyxLQUFLbUUsYUFBZXNDLEVBRWJ6RyxNQUVmeUIsRUFqSEEsR0FBYW5FLEVBQUFtRSxtR0NMYixJQUFBaUYsRUFBQTVJLEVBQUEsR0FHU1IsRUFBQXlELFdBSEEyRixFQUFBM0YsV0FDVCxJQUFBNEYsRUFBQTdJLEVBQUEsR0FFcUJSLEVBQUFrSCxnQkFGWm1DLEVBQUFuQyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2Uge1xuXHRcdHZhciBhID0gZmFjdG9yeSgpO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkod2luZG93LCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDkpO1xuIiwiaW1wb3J0IHsgc2lnbW9pZGFsIH0gZnJvbSAnLi9zaWdtb2lkYWwuZnVuY3Rpb24nO1xuaW1wb3J0IHsgcmVMVSB9IGZyb20gJy4vcmVsdS5mdW5jdGlvbic7XG5pbXBvcnQgeyBoeXBlcmJvbGljVGFuZ2VudCB9IGZyb20gJy4vaHlwZXJib2xpYy10YW5nZW50LmZ1bmN0aW9uJztcbmltcG9ydCB7IGJpbmFyeSB9IGZyb20gJy4vYmluYXJ5LmZ1bmN0aW9uJztcblxuZXhwb3J0IGVudW0gQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZSB7XG4gICAgQklOQVJZID0gJ0JJTkFSWScsXG4gICAgUkVMVSA9ICdSRUxVJyxcbiAgICBTSUdNT0lEQUwgPSAnU0lHTU9JREFMJyxcbiAgICBIWVBFUkJPTElDX1RBTkdFTlQgPSAnSFlQRVJCT0xJQ19UQU5HRU5UJ1xufVxuXG5leHBvcnQgY2xhc3MgQWN0aXZhdGlvbkZ1bmN0aW9uIHtcbiAgICBwcm90ZWN0ZWQgZGVmYXVsdDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGZ1bmN0aW9uTmFtZTogQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZSA9IEFjdGl2YXRpb25GdW5jdGlvblR5cGUuQklOQVJZXG4gICAgKSB7XG4gICAgICAgIHRoaXMuZGVmYXVsdCA9IGZ1bmN0aW9uTmFtZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZ1bmN0aW9uTmFtZSBcbiAgICAgKiBAcGFyYW0ge0FjdGl2YXRpb25GdW5jdGlvblR5cGV9IFtkZWZhdWx0RnVuY3Rpb25dIFxuICAgICAqIEByZXR1cm5zICBcbiAgICAgKi9cbiAgICBzdGF0aWMgcHJvY2VzcyhcbiAgICAgICAgZnVuY3Rpb25OYW1lOiBzdHJpbmcsXG4gICAgICAgIGRlZmF1bHRGdW5jdGlvbj86IEFjdGl2YXRpb25GdW5jdGlvblR5cGVcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBY3RpdmF0aW9uRnVuY3Rpb24oZGVmYXVsdEZ1bmN0aW9uKS5wcm9jZXNzKGZ1bmN0aW9uTmFtZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZ1bmN0aW9uTmFtZSBcbiAgICAgKiBAcmV0dXJucyAgXG4gICAgICovXG4gICAgcHJvY2VzcyhmdW5jdGlvbk5hbWU6IHN0cmluZykge1xuICAgICAgICBjb25zdCBjYWxsYmFjayA9IHtcbiAgICAgICAgICAgIFtBY3RpdmF0aW9uRnVuY3Rpb25UeXBlLkJJTkFSWV06IGJpbmFyeSxcbiAgICAgICAgICAgIFtBY3RpdmF0aW9uRnVuY3Rpb25UeXBlLlJFTFVdOiByZUxVLFxuICAgICAgICAgICAgW0FjdGl2YXRpb25GdW5jdGlvblR5cGUuU0lHTU9JREFMXTogc2lnbW9pZGFsLFxuICAgICAgICAgICAgW0FjdGl2YXRpb25GdW5jdGlvblR5cGUuSFlQRVJCT0xJQ19UQU5HRU5UXTogaHlwZXJib2xpY1RhbmdlbnRcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gY2FsbGJhY2tbZnVuY3Rpb25OYW1lXSB8fCBjYWxsYmFja1t0aGlzLmRlZmF1bHRdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEFjdGl2YXRpb25GdW5jdGlvblR5cGUgfSBmcm9tICcuL2FjdGl2YXRpb24tZnVuY3Rpb25zL2FjdGl2YXRpb24tZnVuY3Rpb24nO1xuaW1wb3J0IHsgU3luYXB0aWNQcm9jZXNzb3IgfSBmcm9tICcuL3N5bmFwdGljLXByb2Nlc3Nvcic7XG5cbmV4cG9ydCBjb25zdCBMSU1JVF9FUlJPUlM6IG51bWJlciA9IDgwMDA7XG5cbmV4cG9ydCBjbGFzcyBQZXJjZXB0cm9uIHtcbiAgICBkYXRhU3RhY2s6IGFueVtdO1xuICAgIHdlaWdodHM6IG51bWJlcltdO1xuICAgIFxuICAgIGNvdW50ZXJFcnJvcnM6IG51bWJlcjtcbiAgICBoYXNFcnJvcjogYm9vbGVhbjtcbiAgICBcbiAgICByYW5nZVdlaWdodDogeyBNSU46IG51bWJlcjsgTUFYOiBudW1iZXIgfTtcbiAgICBzeW5hcHRpY1Byb2Nlc3NvcjogU3luYXB0aWNQcm9jZXNzb3I7XG5cbiAgICBwdWJsaWMgZnVuY0JhY2s6ICgpID0+IHZvaWQ7XG4gICAgcHJvdGVjdGVkIGFjdGl2YXRpb25GdW5jdGlvbjogQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZTtcblxuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrPywgYWN0aXZhdGlvbkZ1bmN0aW9uPzogQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZSkge1xuICAgICAgICB0aGlzLnJhbmdlV2VpZ2h0ID0geyBNSU46IC01LCBNQVg6IDQuOSB9O1xuICAgICAgICB0aGlzLmNvdW50ZXJFcnJvcnMgPSAwO1xuICAgICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG4gICAgICAgIHRoaXMud2VpZ2h0cyA9IG51bGw7XG4gICAgICAgIHRoaXMuZnVuY0JhY2sgPSBjYWxsYmFjayB8fCAoKCkgPT4ge30pO1xuXG4gICAgICAgIHRoaXMuYWN0aXZhdGlvbkZ1bmN0aW9uID0gYWN0aXZhdGlvbkZ1bmN0aW9uO1xuICAgICAgICB0aGlzLnN5bmFwdGljUHJvY2Vzc29yID0gbmV3IFN5bmFwdGljUHJvY2Vzc29yKGFjdGl2YXRpb25GdW5jdGlvbik7XG4gICAgICAgIHRoaXMuZGF0YVN0YWNrID0gW107XG4gICAgfVxuXG4gICAgYWRkRGF0YShkYXRhOiBhbnlbXSwgb3V0cHV0KSB7XG4gICAgICAgIHRoaXMuZGF0YVN0YWNrLnB1c2goW2RhdGEsIG91dHB1dF0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGxlYXJuKCkge1xuICAgICAgICBpZiAoIXRoaXMud2VpZ2h0cykge1xuICAgICAgICAgICAgdGhpcy5hc3NpZ25XZWlnaHRzKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRhdGFTdGFjay5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5zeW5hcHRpY1Byb2Nlc3NvclxuICAgICAgICAgICAgICAgIC5zZXREYXRhKHRoaXMuZGF0YVN0YWNrW2ldWzBdKVxuICAgICAgICAgICAgICAgIC5zZXRFeHBlY3RlZE91dHB1dCh0aGlzLmRhdGFTdGFja1tpXVsxXSlcbiAgICAgICAgICAgICAgICAuY2FsY3VsYXRlU3luYXBzZXModGhpcy53ZWlnaHRzKVxuICAgICAgICAgICAgICAgIC5jYWxjdWxhdGVFcnJvcigpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zeW5hcHRpY1Byb2Nlc3Nvci5lcnJvciAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3luYXB0aWNQcm9jZXNzb3IucmVjYWxjdWxhdGVXZWlnaHRzKHRoaXMud2VpZ2h0cyk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmZ1bmNCYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5oYXNFcnJvcikge1xuICAgICAgICAgICAgdGhpcy5jb3VudGVyRXJyb3JzKys7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmNvdW50ZXJFcnJvcnMgPj0gTElNSVRfRVJST1JTKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudGVyRXJyb3JzID0gMDtcblxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCdNYXhpbXVtIGVycm9yIGxpbWl0IHJlYWNoZWQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVhcm4oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY291bnRlckVycm9ycyA9IDA7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHJvY2VzcyhkYXRhOiBhbnlbXSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zeW5hcHRpY1Byb2Nlc3NvclxuICAgICAgICAgICAgLnNldERhdGEoZGF0YSlcbiAgICAgICAgICAgIC5jYWxjdWxhdGVTeW5hcHNlcyh0aGlzLndlaWdodHMpXG4gICAgICAgICAgICAub3V0cHV0KCk7XG4gICAgfVxuXG4gICAgc2V0V2VpZ2h0cyh3ZWlnaHRzKSB7XG4gICAgICAgIHRoaXMud2VpZ2h0cyA9IHdlaWdodHM7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgc2V0QWN0aXZhdGlvbkZ1bmN0aW9uKGFjdGl2YXRpb25GdW5jdGlvbjogQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZSkge1xuICAgICAgICB0aGlzLmFjdGl2YXRpb25GdW5jdGlvbiA9IGFjdGl2YXRpb25GdW5jdGlvbjtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgY3JlYXRlV2VpZ2h0KCkge1xuICAgICAgICBsZXQgd2VpZ2h0ID0gMDtcbiAgICAgICAgbGV0IHJhbmdlID0gdGhpcy5yYW5nZVdlaWdodC5NQVggLSB0aGlzLnJhbmdlV2VpZ2h0Lk1JTjtcblxuICAgICAgICB3aGlsZSAoIXdlaWdodCkge1xuICAgICAgICAgICAgd2VpZ2h0ID0gcGFyc2VGbG9hdChcbiAgICAgICAgICAgICAgICAoTWF0aC5yYW5kb20oKSAqIHJhbmdlICsgdGhpcy5yYW5nZVdlaWdodC5NSU4pLnRvRml4ZWQoNClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gd2VpZ2h0O1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhc3NpZ25XZWlnaHRzKCkge1xuICAgICAgICBsZXQgZGF0YVNpemUgPSB0aGlzLmRhdGFTdGFja1swXVswXS5sZW5ndGg7XG4gICAgICAgIGxldCB3ZWlnaHRzID0gbmV3IEFycmF5PG51bWJlcj4oZGF0YVNpemUpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YVNpemU7IGkrKykge1xuICAgICAgICAgICAgd2VpZ2h0c1tpXSA9IHRoaXMuY3JlYXRlV2VpZ2h0KCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFdlaWdodHMod2VpZ2h0cyk7XG4gICAgICAgIHRoaXMuc3luYXB0aWNQcm9jZXNzb3IudGhyZXNob2xkID0gdGhpcy5jcmVhdGVXZWlnaHQoKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZnVuY0JhY2soKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBBY3RpdmF0aW9uRnVuY3Rpb25UeXBlIH0gZnJvbSAnLi9hY3RpdmF0aW9uLWZ1bmN0aW9ucy9hY3RpdmF0aW9uLWZ1bmN0aW9uJztcbmltcG9ydCB7IFBlcmNlcHRyb24gfSBmcm9tICcuL3BlcmNlcHRyb24nO1xuXG5leHBvcnQgY2xhc3MgTmV1cm9uIGV4dGVuZHMgUGVyY2VwdHJvbiB7XG4gICAgaW5wdXROZXVyb25zOiBOZXVyb25bXTtcbiAgICBvdXRwdXROZXVyb25zOiBOZXVyb25bXTtcblxuICAgIGVycm9yOiBudW1iZXI7XG4gICAgaXNIaWRkZW46IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RydXRvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGlzSGlkZGVuID0gZmFsc2UpIHtcbiAgICAgICAgc3VwZXIobnVsbCwgQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZS5TSUdNT0lEQUwpO1xuXG4gICAgICAgIHRoaXMuaXNIaWRkZW4gPSBpc0hpZGRlbjtcbiAgICAgICAgdGhpcy5lcnJvciA9IDA7XG5cbiAgICAgICAgdGhpcy5vdXRwdXROZXVyb25zID0gW107XG4gICAgICAgIHRoaXMuaW5wdXROZXVyb25zID0gW107XG4gICAgfVxuXG4gICAgbGVhcm4oKSB7XG4gICAgICAgIGlmICghdGhpcy53ZWlnaHRzKSB7XG4gICAgICAgICAgICB0aGlzLmFzc2lnbldlaWdodHMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kYXRhU3RhY2subGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuc3luYXB0aWNQcm9jZXNzb3JcbiAgICAgICAgICAgICAgICAuc2V0RGF0YSh0aGlzLmRhdGFTdGFja1tpXVswXSlcbiAgICAgICAgICAgICAgICAuc2V0RXhwZWN0ZWRPdXRwdXQodGhpcy5kYXRhU3RhY2tbaV1bMV0pXG4gICAgICAgICAgICAgICAgLmNhbGN1bGF0ZVN5bmFwc2VzKHRoaXMud2VpZ2h0cyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBiYWNrcHJvcGFnYXRpb24oKSB7XG4gICAgICAgIC8vIEVycm9yIGVuIGxhcyBjYXBhcyBvY3VsdGFzXG4gICAgICAgIHRoaXMuaW5wdXROZXVyb25zLmZvckVhY2goKG5ldXJvbjogTmV1cm9uLCBuZXVyb25JbmRleCkgPT4ge1xuICAgICAgICAgICAgbmV1cm9uLmNhbGN1bGF0ZUhpZGRlbkVycm9yKG5ldXJvbkluZGV4KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMuaW5wdXROZXVyb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuaW5wdXROZXVyb25zWzBdLmJhY2twcm9wYWdhdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVjYWxjdWxhdGVXZWlnaHRzKCkge1xuICAgICAgICB0aGlzLnN5bmFwdGljUHJvY2Vzc29yLnVwZGF0ZVRocmVzaG9sZCh0aGlzLnN5bmFwdGljUHJvY2Vzc29yLmVycm9yKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud2VpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy53ZWlnaHRzW2ldICs9XG4gICAgICAgICAgICAgICAgdGhpcy5zeW5hcHRpY1Byb2Nlc3Nvci5sZWFybmluZ1JhdGUgKlxuICAgICAgICAgICAgICAgIHRoaXMuc3luYXB0aWNQcm9jZXNzb3IuZGF0YVtpXSAqXG4gICAgICAgICAgICAgICAgdGhpcy5zeW5hcHRpY1Byb2Nlc3Nvci5kZWx0YTtcblxuICAgICAgICAgICAgdGhpcy53ZWlnaHRzW2ldID0gcGFyc2VGbG9hdCh0aGlzLndlaWdodHNbaV0udG9GaXhlZCg0KSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvdXRwdXQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3luYXB0aWNQcm9jZXNzb3Iub3V0cHV0KCk7XG4gICAgfVxuXG4gICAgY2FsY3VsYXRlSGlkZGVuRXJyb3IobmV1cm9uSW5kZXgpIHtcbiAgICAgICAgbGV0IHN1bUVycm9yID0gMDtcblxuICAgICAgICB0aGlzLm91dHB1dE5ldXJvbnMuZm9yRWFjaCgobmV1cm9uOiBOZXVyb24pID0+IHtcbiAgICAgICAgICAgIHN1bUVycm9yICs9XG4gICAgICAgICAgICAgICAgbmV1cm9uLndlaWdodHNbbmV1cm9uSW5kZXhdICogbmV1cm9uLnN5bmFwdGljUHJvY2Vzc29yLmRlbHRhO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnN5bmFwdGljUHJvY2Vzc29yLmNhbGN1bGF0ZUVycm9yRGVyaXZhdGVkKHN1bUVycm9yKTtcbiAgICAgICAgdGhpcy5yZWNhbGN1bGF0ZVdlaWdodHMoKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBOZXVyb24gfSBmcm9tICcuL25ldXJvbic7XG5cbid1c2Ugc3RyaWN0JztcbmV4cG9ydCBjbGFzcyBCYWNrcHJvcGFnYXRpb24ge1xuICAgIExJTUlUX0VSUk9SUzogbnVtYmVyO1xuICAgIGNvdW50ZXJFcnJvcnM6IG51bWJlcjtcbiAgICBmdW5jaW9uQWN0aXZhY2lvbjogc3RyaW5nO1xuICAgIGVycm9yOiBudW1iZXI7XG4gICAgbGF5ZXJzOiBOZXVyb25bXVtdO1xuXG4gICAgLyoqXG4gICAgICogQGNvbnN0cnV0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5sYXllcnMgPSBbXTtcbiAgICAgICAgdGhpcy5lcnJvciA9IDA7XG4gICAgICAgIHRoaXMuZnVuY2lvbkFjdGl2YWNpb24gPSAnc2lnbW9pZGFsJztcblxuICAgICAgICB0aGlzLmNvdW50ZXJFcnJvcnMgPSAwO1xuICAgICAgICB0aGlzLkxJTUlUX0VSUk9SUyA9IDI1MDA7XG4gICAgfVxuXG4gICAgZm9yd2FyZHByb3BhZ2F0aW9uKHsgaW5wdXQsIG91dHB1dCB9KSB7XG4gICAgICAgIGxldCBvdXRwdXRzID0gW107XG4gICAgICAgIGxldCBkYXRhID0gaW5wdXQ7XG5cbiAgICAgICAgdGhpcy5sYXllcnMuZm9yRWFjaCgobGF5ZXI6IE5ldXJvbltdKSA9PiB7XG4gICAgICAgICAgICBpZiAob3V0cHV0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IG91dHB1dHM7XG4gICAgICAgICAgICAgICAgb3V0cHV0cyA9IFtdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsYXllci5mb3JFYWNoKChuZXVyb246IE5ldXJvbikgPT4ge1xuICAgICAgICAgICAgICAgIG5ldXJvbi5hZGREYXRhKGRhdGEsIG91dHB1dCkubGVhcm4oKTtcbiAgICAgICAgICAgICAgICBvdXRwdXRzLnB1c2gobmV1cm9uLm91dHB1dCgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBiYWNrcHJvcGFnYXRpb24oKSB7XG4gICAgICAgIGNvbnN0IGluZGV4T3V0cHV0TGF5ZXIgPSB0aGlzLmxheWVycy5sZW5ndGggLSAxO1xuXG4gICAgICAgIHRoaXMubGF5ZXJzW2luZGV4T3V0cHV0TGF5ZXJdLmZvckVhY2goKG5ldXJvbjogTmV1cm9uKSA9PiB7XG4gICAgICAgICAgICBuZXVyb24uc3luYXB0aWNQcm9jZXNzb3IuY2FsY3VsYXRlRXJyb3IoKTtcbiAgICAgICAgICAgIG5ldXJvbi5lcnJvciA9IG5ldXJvbi5zeW5hcHRpY1Byb2Nlc3Nvci5lcnJvcjtcbiAgICAgICAgICAgIG5ldXJvbi5zeW5hcHRpY1Byb2Nlc3Nvci5jYWxjdWxhdGVFcnJvckRlcml2YXRlZChuZXVyb24uZXJyb3IpO1xuICAgICAgICAgICAgbmV1cm9uLmVycm9yID0gbmV1cm9uLnN5bmFwdGljUHJvY2Vzc29yLmRlbHRhO1xuXG4gICAgICAgICAgICBpZiAobmV1cm9uLmVycm9yID49IDAuMDAwMSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5ldXJvbi5zeW5hcHRpY1Byb2Nlc3Nvci5kZWx0YSk7XG4gICAgICAgICAgICAgICAgbmV1cm9uLnJlY2FsY3VsYXRlV2VpZ2h0cygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBuZXVyb24uYmFja3Byb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGxlYXJuKGRhdGFzKSB7XG4gICAgICAgIGxldCBsZWFybkNhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgbGV0IHN1bUVycm9ycyA9IDA7XG5cbiAgICAgICAgICAgIGRhdGFzLmZvckVhY2goZGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3J3YXJkcHJvcGFnYXRpb24oZGF0YSk7XG4gICAgICAgICAgICAgICAgdGhpcy5iYWNrcHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgIHRoaXMubGF5ZXJzLmZvckVhY2gobGF5ZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsYXllci5mb3JFYWNoKChuZXVyb246IE5ldXJvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VtRXJyb3JzICs9IG5ldXJvbi5lcnJvciAqIG5ldXJvbi5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBzdW1FcnJvcnMgLz0gMjtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoc3VtRXJyb3JzID49IHRoaXMuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxheWVycy5mb3JFYWNoKGxheWVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuZm9yRWFjaCgobmV1cm9uOiBOZXVyb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldXJvbi5zeW5hcHRpY1Byb2Nlc3Nvci5sZWFybmluZ1JhdGUgLT0gMC4wMTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2V0RXJyb3IocGFyc2VGbG9hdChzdW1FcnJvcnMudG9TdHJpbmcoKSkudG9GaXhlZCg0KSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgbGVhcm5DYWxsYmFjaygpO1xuXG4gICAgICAgIHdoaWxlICh0aGlzLmVycm9yID4gMC4wMDEpIHtcbiAgICAgICAgICAgIHRoaXMuY291bnRlckVycm9ycysrO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmVycm9yLCB0aGlzLmNvdW50ZXJFcnJvcnMpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5jb3VudGVyRXJyb3JzID49IHRoaXMuTElNSVRfRVJST1JTKSB7XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5jb3VudGVyRXJyb3JzID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGVhcm5DYWxsYmFjaygpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb3VudGVyRXJyb3JzID0gMDtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBhZGRMYXllcihudW1iZXJOZXVyb25zOiBudW1iZXIpIHtcbiAgICAgICAgbGV0IGxheWVyID0gdGhpcy5jcmVhdGVMYXllcihudW1iZXJOZXVyb25zKTtcbiAgICAgICAgbGV0IGluZGV4TmV3TGF5ZXIgPSB0aGlzLmxheWVycy5wdXNoKGxheWVyKSAtIDE7XG4gICAgICAgIGxldCBiZWZvcmVMYXllciA9IHRoaXMubGF5ZXJzW2luZGV4TmV3TGF5ZXIgLSAxXTtcblxuICAgICAgICAvLyBWZXJpZmljYXIgc2kgZXhpc3RlIGNhcGEgYW50ZXJpb3JcbiAgICAgICAgaWYgKGJlZm9yZUxheWVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQXB1bnRhciBjb24gY2FkYSBOZXVyb24gZGUgbGEgbnVldmEgY2FwYSBhIGxhIGFudGVyaW9yXG4gICAgICAgIGxheWVyLmZvckVhY2goKG5ldXJvbjogTmV1cm9uKSA9PiB7XG4gICAgICAgICAgICBuZXVyb24uaW5wdXROZXVyb25zID0gYmVmb3JlTGF5ZXI7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFwdW50YXIgY29uIGNhZGEgbmV1cm9uYSBkZSBsYSBjYXBhIGFudGVyaW9yIGEgbGEgbnVldmEgY2FwYVxuICAgICAgICBiZWZvcmVMYXllci5mb3JFYWNoKChuZXVyb246IE5ldXJvbikgPT4ge1xuICAgICAgICAgICAgbmV1cm9uLm91dHB1dE5ldXJvbnMgPSBsYXllcjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHJvY2VzcyhkYXRhKSB7XG4gICAgICAgIGxldCBvdXRwdXRzID0gW107XG5cbiAgICAgICAgdGhpcy5sYXllcnMuZm9yRWFjaChsYXllciA9PiB7XG4gICAgICAgICAgICBpZiAob3V0cHV0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IG91dHB1dHM7XG4gICAgICAgICAgICAgICAgb3V0cHV0cyA9IFtdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsYXllci5mb3JFYWNoKChuZXVyb246IE5ldXJvbikgPT4ge1xuICAgICAgICAgICAgICAgIG91dHB1dHMucHVzaChuZXVyb24ucHJvY2VzcyhkYXRhKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gcmV0dXJuIG91dHB1dHM7XG5cbiAgICAgICAgcmV0dXJuIG91dHB1dHMubWFwKG91dHB1dCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChvdXRwdXQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzZXRFcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVMYXllcihudW1iZXJOZXVyb25zOiBudW1iZXIpIHtcbiAgICAgICAgbGV0IGxheWVyOiBOZXVyb25bXSA9IFtdO1xuICAgICAgICBsZXQgaXNIaWRkZW46IGJvb2xlYW4gPSB0aGlzLmxheWVycy5sZW5ndGggPiAwO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtYmVyTmV1cm9uczsgaSsrKSB7XG4gICAgICAgICAgICBsYXllcltpXSA9IG5ldyBOZXVyb24oaXNIaWRkZW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGxheWVyO1xuICAgIH1cbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBiaW5hcnkoc3luYXBzZSkge1xuICAgIHJldHVybiBzeW5hcHNlID49IDAgPyAxIDogMDtcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBoeXBlcmJvbGljVGFuZ2VudChzeW5hcHNlKSB7XG4gICAgcmV0dXJuIE1hdGgudGFuaChzeW5hcHNlKTtcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiByZUxVKHN5bmFwc2UpIHtcbiAgICByZXR1cm4gc3luYXBzZSA+PSAwID8gc3luYXBzZSA6IDA7XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gc2lnbW9pZGFsKHN5bmFwc2UpIHtcbiAgICByZXR1cm4gMSAvICgxICsgTWF0aC5wb3coTWF0aC5FLCAtc3luYXBzZSkpO1xufVxuIiwiaW1wb3J0IHtcbiAgICBBY3RpdmF0aW9uRnVuY3Rpb24sXG4gICAgQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZVxufSBmcm9tICcuL2FjdGl2YXRpb24tZnVuY3Rpb25zL2FjdGl2YXRpb24tZnVuY3Rpb24nO1xuXG5leHBvcnQgY2xhc3MgU3luYXB0aWNQcm9jZXNzb3Ige1xuICAgIGFjdGl2YXRpb25GdW5jdGlvbjogc3RyaW5nO1xuICAgIGVycm9yOiBudW1iZXI7XG4gICAgc3luYXBzZTogbnVtYmVyO1xuICAgIGV4cGVjdGVkT3V0cHV0OiBhbnk7XG4gICAgZGF0YTogbnVtYmVyW107XG4gICAgdGhyZXNob2xkOiBudW1iZXI7XG4gICAgbGVhcm5pbmdSYXRlOiBudW1iZXI7XG4gICAgZGVsdGE6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBhY3RpdmF0aW9uRnVuY3Rpb246IEFjdGl2YXRpb25GdW5jdGlvblR5cGUsXG4gICAgICAgIGRhdGE6IGFueVtdID0gbnVsbCxcbiAgICAgICAgZXhwZWN0ZWRPdXRwdXQ6IGFueSA9IG51bGxcbiAgICApIHtcbiAgICAgICAgdGhpcy5sZWFybmluZ1JhdGUgPSAwLjAyNTtcbiAgICAgICAgdGhpcy5lcnJvciA9IDA7XG4gICAgICAgIHRoaXMuYWN0aXZhdGlvbkZ1bmN0aW9uID0gYWN0aXZhdGlvbkZ1bmN0aW9uO1xuXG4gICAgICAgIHRoaXMuc2V0RXhwZWN0ZWRPdXRwdXQoZXhwZWN0ZWRPdXRwdXQpO1xuICAgICAgICB0aGlzLnNldERhdGEoZGF0YSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBvdXRwdXQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIEFjdGl2YXRpb25GdW5jdGlvbi5wcm9jZXNzKHRoaXMuYWN0aXZhdGlvbkZ1bmN0aW9uKShcbiAgICAgICAgICAgIHRoaXMuc3luYXBzZVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyW119IHdlaWdodHNcbiAgICAgKi9cbiAgICByZWNhbGN1bGF0ZVdlaWdodHMod2VpZ2h0czogbnVtYmVyW10pIHtcbiAgICAgICAgbGV0IGVycm9yID0gdGhpcy5leHBlY3RlZE91dHB1dCAtIHRoaXMub3V0cHV0KCk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVUaHJlc2hvbGQoZXJyb3IpO1xuICAgICAgICB0aGlzLmNhbGN1bGF0ZURlbHRhKGVycm9yKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdlaWdodHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHdlaWdodHNbaV0gKz0gdGhpcy5kYXRhW2ldICogdGhpcy5kZWx0YTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZVRocmVzaG9sZChlcnJvcik6IGFueSB7XG4gICAgICAgIHRoaXMudGhyZXNob2xkIC09IHRoaXMubGVhcm5pbmdSYXRlICogZXJyb3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHthbnl9IGV4cGVjdGVkT3V0cHV0XG4gICAgICogQHBhcmFtIHsqfSBvdXRwdXRcbiAgICAgKiBAcmV0dXJucyB0aGlzXG4gICAgICovXG4gICAgY2FsY3VsYXRlRGVsdGEoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5kZWx0YSA9IHRoaXMubGVhcm5pbmdSYXRlICogZXJyb3I7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJbXX0gd2VpZ2h0c1xuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgY2FsY3VsYXRlU3luYXBzZXMod2VpZ2h0czogbnVtYmVyW10pIHtcbiAgICAgICAgdGhpcy5zeW5hcHNlID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdlaWdodHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuc3luYXBzZSArPSB0aGlzLmRhdGFbaV0gKiB3ZWlnaHRzW2ldO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zeW5hcHNlICs9IHRoaXMudGhyZXNob2xkO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGNhbGN1bGF0ZUVycm9yKCkge1xuICAgICAgICB0aGlzLmVycm9yID0gdGhpcy5leHBlY3RlZE91dHB1dCAtIHRoaXMub3V0cHV0KCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY2FsY3VsYXRlRXJyb3JEZXJpdmF0ZWQoZmFjdG9yRGVsdGEpIHtcbiAgICAgICAgbGV0IG91dHB1dCA9IHRoaXMub3V0cHV0KCk7XG4gICAgICAgIGxldCBlcnJvckNvbXBsZW1lbnQgPSBvdXRwdXQgLSBvdXRwdXQgKiBvdXRwdXQ7XG5cbiAgICAgICAgdGhpcy5kZWx0YSA9IGZhY3RvckRlbHRhICogZXJyb3JDb21wbGVtZW50O1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHNldERhdGEoZGF0YTogYW55W10pIHtcbiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YS5zbGljZSgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHNldEV4cGVjdGVkT3V0cHV0KGV4cGVjdGVkT3V0cHV0KSB7XG4gICAgICAgIHRoaXMuZXhwZWN0ZWRPdXRwdXQgPSBleHBlY3RlZE91dHB1dDtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBzZXRMZWFybmluZ0ZhY3RvcihsZWFybmluZ0ZhY3Rvcikge1xuICAgICAgICB0aGlzLmxlYXJuaW5nUmF0ZSA9IGxlYXJuaW5nRmFjdG9yO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFBlcmNlcHRyb24gfSBmcm9tICcuL3BlcmNlcHRyb24nO1xuaW1wb3J0IHsgQmFja3Byb3BhZ2F0aW9uIH0gZnJvbSAnLi9iYWNrcHJvcGFnYXRpb24nO1xuXG5leHBvcnQgeyBQZXJjZXB0cm9uLCBCYWNrcHJvcGFnYXRpb24gfTtcbiJdLCJzb3VyY2VSb290IjoiIn0=