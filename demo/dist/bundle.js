!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var s=e();for(var r in s)("object"==typeof exports?exports:t)[r]=s[r]}}(window,function(){return function(t){var e={};function s(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=t,s.c=e,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(r,i,function(e){return t[e]}.bind(null,i));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=3)}([function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(4),i=s(5),o=s(6),n=s(7);var a;!function(t){t.BINARY="BINARY",t.RELU="RELU",t.SIGMOIDAL="SIGMOIDAL",t.HYPERBOLIC_TANGENT="HYPERBOLIC_TANGENT"}(a=e.ActivationFunctionType||(e.ActivationFunctionType={}));const c={[a.BINARY]:r.Binary,[a.RELU]:n.ReLU,[a.SIGMOIDAL]:o.Sigmoidal,[a.HYPERBOLIC_TANGENT]:i.HyperbolicTangent};class h{constructor(t=a.BINARY){this.default=t,this.setCallback(),this.setCallbackPrime()}static init(t){return new h(t)}activation(t){return this.callback(t)}prime(t){return this.callbackPrime(t)}setCallback(){this.callback=c[this.default].activation}setCallbackPrime(){this.callbackPrime=c[this.default].prime}}e.ActivationFunction=h},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(2);e.Perceptron=class{constructor(t,e=(()=>{})){this.weights=null,this.funcBack=e,this.synapticProcessor=new r.SynapticProcessor(t),this.dataStack=[]}addData(t,e){return this.dataStack.push([t,e]),this}learn(){this.weights||this.assignWeights();let t=0;const e=()=>{let s=!1;for(let t=0;t<this.dataStack.length;t++)this.synapticProcessor.setData(this.dataStack[t][0]).setOutputExpected(this.dataStack[t][1]).calculateSynapses(this.weights,this.threshold).calculateError(),0!==this.synapticProcessor.error&&(this.synapticProcessor.recalculateWeights(this.weights),this.threshold+=this.synapticProcessor.delta,s=!0,this.funcBack());if(s){if(++t>=8e3)throw t=0,Error("Maximum error limit reached");return e()}t=0};return e(),this}process(t){return this.synapticProcessor.setData(t).calculateSynapses(this.weights,this.threshold).output()}setWeights(t){return this.weights=t,this}createWeight(){const t=-.5,e=.49-t;let s=0;for(;!s;)s=parseFloat((Math.random()*e+t).toFixed(4));return s}assignWeights(t=null){t||(t=this.dataStack[0][0].length);const e=new Float64Array(t);for(let s=0;s<t;s++)e[s]=this.createWeight();return this.setWeights(e),this.threshold=this.createWeight(),this.funcBack(),this}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(0);e.SynapticProcessor=class{constructor(t,e=.3){this.error=0,this.activationFunction=r.ActivationFunction.init(t),this.setLearningFactor(e)}output(){return this.activationFunction.activation(this.synapse)}recalculateWeights(t){const e=this.outputExpected-this.output();this.delta=this.learningRate*e;for(let e=0;e<t.length;e++)t[e]+=this.data[e]*this.delta}calculateSynapses(t,e){this.synapse=0;for(let e=0;e<t.length;e++)this.synapse+=this.data[e]*t[e];return this.synapse+=e,this}calculateError(){return this.error=this.outputExpected-this.output(),this}setData(t){return this.data=t.slice(),this}setOutputExpected(t){return this.outputExpected=t,this}setLearningFactor(t){return this.learningRate=t,this}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(1);e.Perceptron=r.Perceptron;const i=s(8);e.Backpropagation=i.Backpropagation},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.activation=function(t){return t>=0?1:0}}(e.Binary||(e.Binary={}))},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function e(t){return Math.tanh(t)}t.activation=e,t.prime=function(t){const s=e(t);return 1-s*s}}(e.HyperbolicTangent||(e.HyperbolicTangent={}))},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.activation=function(t){return 1/(1+Math.E**-t)},t.prime=function(t){const e=Math.E**t;return e/(e+1)**2}}(e.Sigmoidal||(e.Sigmoidal={}))},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.activation=function(t){return t>0?t:0},t.prime=function(t){return t}}(e.ReLU||(e.ReLU={}))},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(0),i=s(9);e.Backpropagation=class{constructor(t={epochs:1e3,activationFunction:r.ActivationFunctionType.SIGMOIDAL,learningRate:.3,verbose:!1}){this.error=0,this.activationFunction=t.activationFunction,this.layers=new i.Layer(this.activationFunction,t.learningRate),this.epochs=t.epochs,this.verbose=t.verbose,this.history={loss:[]}}learn(t){this.datasetInputToFloatArray(t),this.runEpoch(t);let e=1;for(;e<=this.epochs;)this.history.loss.push(this.error),e++,this.verbose&&e%1e3==0&&console.log(this.error,e),this.runEpoch(t);return this}process(t){let e=[];return t=new Float64Array(t),this.verbose&&console.log(t),this.layers.forEach(s=>{e.length>0&&(t=new Float64Array(e),e=[]),this.layers.synapticProcessor.setData(t);for(let t=0;t<s.length;t++){const r=s[t];e[t]=r.process()}}),this.verbose&&console.log(e),e}addLayer(t){return this.layers.add(t),this}importModel(t){return t.layers.forEach(t=>{this.addLayer(t)}),t.weights.forEach((e,s)=>{this.layers.get(s).forEach((r,i)=>{r.setWeights(new Float64Array(e[i])).setBeforeWeights(r.weights.slice()).setThreshold(t.thresholds[s][i])})}),this}exportModel(){let t={layers:[],thresholds:[],weights:[]};return this.layers.forEach(e=>{t.layers.push(e.length);const s=t.thresholds.push([]),r=t.weights.push([]);let i=t.thresholds[s-1],o=t.weights[r-1];e.forEach(t=>{o.push(Array.from(t.weights)),i.push(t.threshold)})}),t}datasetInputToFloatArray(t){for(let e=0;e<t.length;e++){const s=t[e];s.input=new Float64Array(s.input)}}runEpoch(t){for(let e=0;e<t.length;e++){const s=t[e];this.forwardpropagation(s),this.backpropagation(s.output),this.layers.forEach(t=>{for(let e=0;e<t.length;e++)t[e].recalculateWeights()})}}forwardpropagation({input:t}){let e=[],s=new Float64Array(t);return this.layers.forEach(t=>{e.length>0&&(s=new Float64Array(e),e=[]),this.layers.synapticProcessor.setData(s);for(let s=0;s<t.length;s++){const r=t[s];e[s]=r.learn().output()}}),this}backpropagation(t){const e=this.layers.getLast();let s=0;for(let r=0;r<e.length;r++){const i=e[r];i.calculateErrorOfOutput(t),i.backpropagation(),s+=i.error*i.error}this.error=s/2}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(0),i=s(10),o=s(2);e.Layer=class{constructor(t=r.ActivationFunctionType.SIGMOIDAL,e){this.layers=[],this.activationFunction=t,this.synapticProcessor=new o.SynapticProcessor(this.activationFunction,e)}add(t){const e=this.create(t),s=this.layers.push(e)-1,r=this.layers[s-1];return void 0===r?this:(e.forEach(t=>{t.inputNeurons=r}),r.forEach(t=>{t.outputNeurons=e}),this)}forEach(t){for(let e=0;e<this.layers.length;e++)t(this.layers[e],e)}get(t){return this.layers[t]}getLast(){return this.get(this.layers.length-1)}create(t){const e=[];for(let s=0;s<t;s++)e[s]=new i.Neuron(this.activationFunction),e[s].synapticProcessor=this.synapticProcessor;return e}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(0),i=s(1);e.Neuron=class extends i.Perceptron{constructor(t=r.ActivationFunctionType.SIGMOIDAL){super(t),this.error=0,this.synapse=0,this.outputNeurons=[],this.inputNeurons=[]}learn(t){return t&&(this.synapticProcessor.data=t),this.currentData=this.synapticProcessor.data,this.weights||(this.assignWeights(this.currentData.length),this.setBeforeWeights(this.weights.slice())),this.synapticProcessor.calculateSynapses(this.weights,this.threshold),this.synapse=this.synapticProcessor.synapse,this}backpropagation(){for(let t=0;t<this.inputNeurons.length;t++)this.inputNeurons[t].calculateHiddenError(t);this.inputNeurons.length>0&&this.inputNeurons[0].backpropagation()}recalculateWeights(){const t=this.synapticProcessor.learningRate*this.error;let e=0;for(let s=0;s<this.weights.length;s++)0!==this.currentData[s]&&(e=.77*(this.weights[s]-this.beforeWeights[s]),this.beforeWeights[s]=this.weights[s],this.weights[s]+=this.currentData[s]*t+e);this.threshold+=t}output(){return this.synapticProcessor.activationFunction.activation(this.synapse)}process(){return this.synapticProcessor.calculateSynapses(this.weights,this.threshold),this.synapse=this.synapticProcessor.synapse,this.output()}calculateErrorOfOutput(t){const e=t-this.output();this.calculateErrorDerivated(e)}calculateHiddenError(t){let e=0;for(let s=0;s<this.outputNeurons.length;s++){const r=this.outputNeurons[s];e+=r.weights[t]*r.error}return this.calculateErrorDerivated(e),this}calculateErrorDerivated(t){return this.error=t*this.prime(),this}prime(){return this.synapticProcessor.activationFunction.prime(this.synapse)}setBeforeWeights(t){return this.beforeWeights=t,this}setThreshold(t){return this.threshold=t,this}}}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vLi9zcmMvYWN0aXZhdGlvbi1mdW5jdGlvbnMvYWN0aXZhdGlvbi1mdW5jdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGVyY2VwdHJvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc3luYXB0aWMtcHJvY2Vzc29yLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWN0aXZhdGlvbi1mdW5jdGlvbnMvYmluYXJ5LmZ1bmN0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9hY3RpdmF0aW9uLWZ1bmN0aW9ucy9oeXBlcmJvbGljLXRhbmdlbnQuZnVuY3Rpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGl2YXRpb24tZnVuY3Rpb25zL3NpZ21vaWRhbC5mdW5jdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWN0aXZhdGlvbi1mdW5jdGlvbnMvcmVsdS5mdW5jdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYmFja3Byb3BhZ2F0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9sYXllci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbmV1cm9uLnRzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsImEiLCJpIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiYmluYXJ5X2Z1bmN0aW9uXzEiLCJoeXBlcmJvbGljX3RhbmdlbnRfZnVuY3Rpb25fMSIsInNpZ21vaWRhbF9mdW5jdGlvbl8xIiwicmVsdV9mdW5jdGlvbl8xIiwiQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZSIsImNhbGxiYWNrIiwiW29iamVjdCBPYmplY3RdIiwiQklOQVJZIiwiQmluYXJ5IiwiUkVMVSIsIlJlTFUiLCJTSUdNT0lEQUwiLCJTaWdtb2lkYWwiLCJIWVBFUkJPTElDX1RBTkdFTlQiLCJIeXBlcmJvbGljVGFuZ2VudCIsIkFjdGl2YXRpb25GdW5jdGlvbiIsImZ1bmN0aW9uTmFtZSIsInRoaXMiLCJkZWZhdWx0Iiwic2V0Q2FsbGJhY2siLCJzZXRDYWxsYmFja1ByaW1lIiwic3luYXBzZSIsImNhbGxiYWNrUHJpbWUiLCJhY3RpdmF0aW9uIiwicHJpbWUiLCJzeW5hcHRpY19wcm9jZXNzb3JfMSIsIlBlcmNlcHRyb24iLCJhY3RpdmF0aW9uRnVuY3Rpb24iLCJ3ZWlnaHRzIiwiZnVuY0JhY2siLCJzeW5hcHRpY1Byb2Nlc3NvciIsIlN5bmFwdGljUHJvY2Vzc29yIiwiZGF0YVN0YWNrIiwiZGF0YSIsIm91dHB1dCIsInB1c2giLCJhc3NpZ25XZWlnaHRzIiwiY291bnRlckVycm9ycyIsInJ1bkVwb2NocyIsImhhc0Vycm9yIiwibGVuZ3RoIiwic2V0RGF0YSIsInNldE91dHB1dEV4cGVjdGVkIiwiY2FsY3VsYXRlU3luYXBzZXMiLCJ0aHJlc2hvbGQiLCJjYWxjdWxhdGVFcnJvciIsImVycm9yIiwicmVjYWxjdWxhdGVXZWlnaHRzIiwiZGVsdGEiLCJFcnJvciIsInJhbmdlV2VpZ2h0IiwicmFuZ2VEaWZmIiwid2VpZ2h0IiwicGFyc2VGbG9hdCIsIk1hdGgiLCJyYW5kb20iLCJ0b0ZpeGVkIiwiZGF0YVNpemUiLCJGbG9hdDY0QXJyYXkiLCJjcmVhdGVXZWlnaHQiLCJzZXRXZWlnaHRzIiwiYWN0aXZhdGlvbl9mdW5jdGlvbl8xIiwibGVhcm5pbmdSYXRlIiwiaW5pdCIsInNldExlYXJuaW5nRmFjdG9yIiwib3V0cHV0RXhwZWN0ZWQiLCJzbGljZSIsImV4cGVjdGVkT3V0cHV0IiwibGVhcm5pbmdGYWN0b3IiLCJwZXJjZXB0cm9uXzEiLCJiYWNrcHJvcGFnYXRpb25fMSIsIkJhY2twcm9wYWdhdGlvbiIsInRhbmgiLCJFIiwiZXgiLCJsYXllcl8xIiwiY29uZmlnIiwiZXBvY2hzIiwidmVyYm9zZSIsImxheWVycyIsIkxheWVyIiwiaGlzdG9yeSIsImxvc3MiLCJkYXRhc2V0IiwiZGF0YXNldElucHV0VG9GbG9hdEFycmF5IiwicnVuRXBvY2giLCJjb3VudGVyRXBvY2hzIiwiY29uc29sZSIsImxvZyIsIm91dHB1dHMiLCJmb3JFYWNoIiwibGF5ZXIiLCJpbmRleCIsIm5ldXJvbiIsInByb2Nlc3MiLCJudW1iZXJOZXVyb25zIiwiYWRkIiwibW9kZWwiLCJhZGRMYXllciIsImxheWVyV2VpZ2h0cyIsIm5ldXJvbkluZGV4Iiwic2V0QmVmb3JlV2VpZ2h0cyIsInNldFRocmVzaG9sZCIsInRocmVzaG9sZHMiLCJpbmRleExheWVyVGhyZXNob2xkcyIsImluZGV4TGF5ZXJXZWlnaHRzIiwibGF5ZXJUaHJlc2hvbGRzIiwiQXJyYXkiLCJmcm9tIiwiaW5wdXQiLCJkYXRhSWR4IiwiZm9yd2FyZHByb3BhZ2F0aW9uIiwiYmFja3Byb3BhZ2F0aW9uIiwibmV1cm9uSWR4IiwibGVhcm4iLCJsYXN0TGF5ZXIiLCJnZXRMYXN0Iiwic3VtRXJyb3JzIiwiY2FsY3VsYXRlRXJyb3JPZk91dHB1dCIsIm5ldXJvbl8xIiwiaW5kZXhOZXdMYXllciIsImJlZm9yZUxheWVyIiwidW5kZWZpbmVkIiwiaW5wdXROZXVyb25zIiwib3V0cHV0TmV1cm9ucyIsImlkeCIsIk5ldXJvbiIsInN1cGVyIiwiY3VycmVudERhdGEiLCJjYWxjdWxhdGVIaWRkZW5FcnJvciIsImRlbHRhV2VpZ2h0cyIsImJlZm9yZVdlaWdodHMiLCJjYWxjdWxhdGVFcnJvckRlcml2YXRlZCIsInN1bUVycm9yIiwiZmFjdG9yRGVsdGEiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0Esb0JBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELFNBQ0Esc0JBQUFHLGVBQUFDLElBQ0FELE9BQUEsR0FBQUgsT0FDQSxDQUNBLElBQUFLLEVBQUFMLElBQ0EsUUFBQU0sS0FBQUQsR0FBQSxpQkFBQUosZ0JBQUFGLEdBQUFPLEdBQUFELEVBQUFDLElBUEEsQ0FTQ0MsT0FBQSxXQUNELG1CQ1RBLElBQUFDLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQVQsUUFHQSxJQUFBQyxFQUFBTSxFQUFBRSxHQUFBLENBQ0FKLEVBQUFJLEVBQ0FDLEdBQUEsRUFDQVYsUUFBQSxJQVVBLE9BTkFXLEVBQUFGLEdBQUFHLEtBQUFYLEVBQUFELFFBQUFDLElBQUFELFFBQUFRLEdBR0FQLEVBQUFTLEdBQUEsRUFHQVQsRUFBQUQsUUEwREEsT0FyREFRLEVBQUFLLEVBQUFGLEVBR0FILEVBQUFNLEVBQUFQLEVBR0FDLEVBQUFPLEVBQUEsU0FBQWYsRUFBQWdCLEVBQUFDLEdBQ0FULEVBQUFVLEVBQUFsQixFQUFBZ0IsSUFDQUcsT0FBQUMsZUFBQXBCLEVBQUFnQixFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDVCxFQUFBZSxFQUFBLFNBQUF2QixHQUNBLG9CQUFBd0IsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQXBCLEVBQUF3QixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBcEIsRUFBQSxjQUFpRDBCLE9BQUEsS0FRakRsQixFQUFBbUIsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQWxCLEVBQUFrQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFB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LEtBU0dqSCxLQUFLVyxRQUFRaEUsR0FBS3FELEtBQUtrSCxjQUFjdkssSUFFM0RxRCxLQUFLa0gsY0FBY3ZLLEdBQUtxRCxLQUFLVyxRQUFRaEUsR0FDckNxRCxLQUFLVyxRQUFRaEUsSUFBTXFELEtBQUsrRyxZQUFZcEssR0FBS29GLEVBQVFrRixHQUdyRGpILEtBQUsyQixXQUFhSSxFQUd0QjFDLFNBQ0ksT0FBT1csS0FBS2Esa0JBQWtCSCxtQkFBbUJKLFdBQzdDTixLQUFLSSxTQUliZixVQUlJLE9BSEFXLEtBQUthLGtCQUFrQmEsa0JBQWtCMUIsS0FBS1csUUFBU1gsS0FBSzJCLFdBQzVEM0IsS0FBS0ksUUFBVUosS0FBS2Esa0JBQWtCVCxRQUUvQkosS0FBS2lCLFNBR2hCNUIsdUJBQXVCMkQsR0FDbkIsTUFBTW5CLEVBQVFtQixFQUFpQmhELEtBQUtpQixTQUVwQ2pCLEtBQUttSCx3QkFBd0J0RixHQUdqQ3hDLHFCQUFxQjhGLEdBQ2pCLElBQUlpQyxFQUFXLEVBRWYsSUFBSyxJQUFJekMsRUFBUSxFQUFHQSxFQUFRM0UsS0FBSzJHLGNBQWNwRixPQUFRb0QsSUFBUyxDQUM1RCxNQUFNQyxFQUFTNUUsS0FBSzJHLGNBQWNoQyxHQUNsQ3lDLEdBQVl4QyxFQUFPakUsUUFBUXdFLEdBQWVQLEVBQU8vQyxNQUtyRCxPQUZBN0IsS0FBS21ILHdCQUF3QkMsR0FFdEJwSCxLQUdYWCx3QkFBd0JnSSxHQUdwQixPQUZBckgsS0FBSzZCLE1BQVF3RixFQUFjckgsS0FBS08sUUFFekJQLEtBTVhYLFFBQ0ksT0FBT1csS0FBS2Esa0JBQWtCSCxtQkFBbUJILE1BQU1QLEtBQUtJLFNBT2hFZixpQkFBaUI2SCxHQUdiLE9BRkFsSCxLQUFLa0gsY0FBZ0JBLEVBRWRsSCxLQU1YWCxhQUFhc0MsR0FHVCxPQUZBM0IsS0FBSzJCLFVBQVlBLEVBRVYzQiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2Uge1xuXHRcdHZhciBhID0gZmFjdG9yeSgpO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkod2luZG93LCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMyk7XG4iLCJpbXBvcnQgeyBCaW5hcnkgfSBmcm9tICcuL2JpbmFyeS5mdW5jdGlvbic7XHJcbmltcG9ydCB7IEh5cGVyYm9saWNUYW5nZW50IH0gZnJvbSAnLi9oeXBlcmJvbGljLXRhbmdlbnQuZnVuY3Rpb24nO1xyXG5pbXBvcnQgeyBTaWdtb2lkYWwgfSBmcm9tICcuL3NpZ21vaWRhbC5mdW5jdGlvbic7XHJcbmltcG9ydCB7IFJlTFUgfSBmcm9tICcuL3JlbHUuZnVuY3Rpb24nO1xyXG5cclxuZXhwb3J0IGVudW0gQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZSB7XHJcbiAgICBCSU5BUlkgPSAnQklOQVJZJyxcclxuICAgIFJFTFUgPSAnUkVMVScsXHJcbiAgICBTSUdNT0lEQUwgPSAnU0lHTU9JREFMJyxcclxuICAgIEhZUEVSQk9MSUNfVEFOR0VOVCA9ICdIWVBFUkJPTElDX1RBTkdFTlQnXHJcbn1cclxuXHJcbmNvbnN0IGNhbGxiYWNrID0ge1xyXG4gICAgW0FjdGl2YXRpb25GdW5jdGlvblR5cGUuQklOQVJZXTogQmluYXJ5LFxyXG4gICAgW0FjdGl2YXRpb25GdW5jdGlvblR5cGUuUkVMVV06IFJlTFUsXHJcbiAgICBbQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZS5TSUdNT0lEQUxdOiBTaWdtb2lkYWwsXHJcbiAgICBbQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZS5IWVBFUkJPTElDX1RBTkdFTlRdOiBIeXBlcmJvbGljVGFuZ2VudFxyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIEFjdGl2YXRpb25GdW5jdGlvbiB7XHJcbiAgICBwcm90ZWN0ZWQgZGVmYXVsdDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBjYWxsYmFjazogRnVuY3Rpb247XHJcbiAgICBwcml2YXRlIGNhbGxiYWNrUHJpbWU6IEZ1bmN0aW9uO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIGZ1bmN0aW9uTmFtZTogQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZSA9IEFjdGl2YXRpb25GdW5jdGlvblR5cGUuQklOQVJZXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmRlZmF1bHQgPSBmdW5jdGlvbk5hbWU7XHJcbiAgICAgICAgdGhpcy5zZXRDYWxsYmFjaygpO1xyXG4gICAgICAgIHRoaXMuc2V0Q2FsbGJhY2tQcmltZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZ1bmN0aW9uTmFtZVxyXG4gICAgICogQHJldHVybnNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGluaXQoZnVuY3Rpb25OYW1lOiBBY3RpdmF0aW9uRnVuY3Rpb25UeXBlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBY3RpdmF0aW9uRnVuY3Rpb24oZnVuY3Rpb25OYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzeW5hcHNlXHJcbiAgICAgKiBAcmV0dXJuc1xyXG4gICAgICovXHJcbiAgICBhY3RpdmF0aW9uKHN5bmFwc2U6IG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxiYWNrKHN5bmFwc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN5bmFwc2VcclxuICAgICAqIEByZXR1cm5zXHJcbiAgICAgKi9cclxuICAgIHByaW1lKHN5bmFwc2U6IG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxiYWNrUHJpbWUoc3luYXBzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRDYWxsYmFjaygpIHtcclxuICAgICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2tbdGhpcy5kZWZhdWx0XS5hY3RpdmF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0Q2FsbGJhY2tQcmltZSgpIHtcclxuICAgICAgICB0aGlzLmNhbGxiYWNrUHJpbWUgPSBjYWxsYmFja1t0aGlzLmRlZmF1bHRdLnByaW1lO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEFjdGl2YXRpb25GdW5jdGlvblR5cGUgfSBmcm9tICcuL2FjdGl2YXRpb24tZnVuY3Rpb25zL2FjdGl2YXRpb24tZnVuY3Rpb24nO1xyXG5pbXBvcnQgeyBTeW5hcHRpY1Byb2Nlc3NvciB9IGZyb20gJy4vc3luYXB0aWMtcHJvY2Vzc29yJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQZXJjZXB0cm9uIHtcclxuICAgIGRhdGFTdGFjazogYW55W107XHJcbiAgICB3ZWlnaHRzOiBGbG9hdDY0QXJyYXk7XHJcbiAgICB0aHJlc2hvbGQ6IG51bWJlcjtcclxuICAgIHN5bmFwdGljUHJvY2Vzc29yOiBTeW5hcHRpY1Byb2Nlc3NvcjtcclxuXHJcbiAgICBmdW5jQmFjazogKCkgPT4gdm9pZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBhY3RpdmF0aW9uRnVuY3Rpb24/OiBBY3RpdmF0aW9uRnVuY3Rpb25UeXBlLFxyXG4gICAgICAgIGNhbGxiYWNrID0gKCkgPT4ge31cclxuICAgICkge1xyXG4gICAgICAgIHRoaXMud2VpZ2h0cyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5mdW5jQmFjayA9IGNhbGxiYWNrO1xyXG5cclxuICAgICAgICB0aGlzLnN5bmFwdGljUHJvY2Vzc29yID0gbmV3IFN5bmFwdGljUHJvY2Vzc29yKGFjdGl2YXRpb25GdW5jdGlvbik7XHJcbiAgICAgICAgdGhpcy5kYXRhU3RhY2sgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBhZGREYXRhKGRhdGE6IEZsb2F0NjRBcnJheSwgb3V0cHV0OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmRhdGFTdGFjay5wdXNoKFtkYXRhLCBvdXRwdXRdKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgbGVhcm4oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLndlaWdodHMpIHtcclxuICAgICAgICAgICAgdGhpcy5hc3NpZ25XZWlnaHRzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBMSU1JVF9FUlJPUlM6IG51bWJlciA9IDgwMDA7XHJcbiAgICAgICAgbGV0IGNvdW50ZXJFcnJvcnMgPSAwO1xyXG5cclxuICAgICAgICBjb25zdCBydW5FcG9jaHMgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBoYXNFcnJvciA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRhdGFTdGFjay5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zeW5hcHRpY1Byb2Nlc3NvclxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXREYXRhKHRoaXMuZGF0YVN0YWNrW2ldWzBdKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRPdXRwdXRFeHBlY3RlZCh0aGlzLmRhdGFTdGFja1tpXVsxXSlcclxuICAgICAgICAgICAgICAgICAgICAuY2FsY3VsYXRlU3luYXBzZXModGhpcy53ZWlnaHRzLCB0aGlzLnRocmVzaG9sZClcclxuICAgICAgICAgICAgICAgICAgICAuY2FsY3VsYXRlRXJyb3IoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zeW5hcHRpY1Byb2Nlc3Nvci5lcnJvciAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3luYXB0aWNQcm9jZXNzb3IucmVjYWxjdWxhdGVXZWlnaHRzKHRoaXMud2VpZ2h0cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aHJlc2hvbGQgKz0gdGhpcy5zeW5hcHRpY1Byb2Nlc3Nvci5kZWx0YTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaGFzRXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnVuY0JhY2soKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGhhc0Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb3VudGVyRXJyb3JzKys7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNvdW50ZXJFcnJvcnMgPj0gTElNSVRfRVJST1JTKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnRlckVycm9ycyA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCdNYXhpbXVtIGVycm9yIGxpbWl0IHJlYWNoZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcnVuRXBvY2hzKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvdW50ZXJFcnJvcnMgPSAwO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJ1bkVwb2NocygpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwcm9jZXNzKGRhdGE6IEZsb2F0NjRBcnJheSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN5bmFwdGljUHJvY2Vzc29yXHJcbiAgICAgICAgICAgIC5zZXREYXRhKGRhdGEpXHJcbiAgICAgICAgICAgIC5jYWxjdWxhdGVTeW5hcHNlcyh0aGlzLndlaWdodHMsIHRoaXMudGhyZXNob2xkKVxyXG4gICAgICAgICAgICAub3V0cHV0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0V2VpZ2h0cyh3ZWlnaHRzOiBGbG9hdDY0QXJyYXkpIHtcclxuICAgICAgICB0aGlzLndlaWdodHMgPSB3ZWlnaHRzO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgY3JlYXRlV2VpZ2h0KCkge1xyXG4gICAgICAgIGNvbnN0IHJhbmdlV2VpZ2h0ID0geyBNSU46IC0wLjUsIE1BWDogMC40OSB9O1xyXG4gICAgICAgIGNvbnN0IHJhbmdlRGlmZiA9IHJhbmdlV2VpZ2h0Lk1BWCAtIHJhbmdlV2VpZ2h0Lk1JTjtcclxuICAgICAgICBsZXQgd2VpZ2h0ID0gMDtcclxuXHJcbiAgICAgICAgd2hpbGUgKCF3ZWlnaHQpIHtcclxuICAgICAgICAgICAgd2VpZ2h0ID0gcGFyc2VGbG9hdChcclxuICAgICAgICAgICAgICAgIChNYXRoLnJhbmRvbSgpICogcmFuZ2VEaWZmICsgcmFuZ2VXZWlnaHQuTUlOKS50b0ZpeGVkKDQpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gd2VpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhc3NpZ25XZWlnaHRzKGRhdGFTaXplOiBudW1iZXIgPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKCFkYXRhU2l6ZSkge1xyXG4gICAgICAgICAgICBkYXRhU2l6ZSA9IHRoaXMuZGF0YVN0YWNrWzBdWzBdLmxlbmd0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHdlaWdodHMgPSBuZXcgRmxvYXQ2NEFycmF5KGRhdGFTaXplKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhU2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHdlaWdodHNbaV0gPSB0aGlzLmNyZWF0ZVdlaWdodCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXRXZWlnaHRzKHdlaWdodHMpO1xyXG4gICAgICAgIHRoaXMudGhyZXNob2xkID0gdGhpcy5jcmVhdGVXZWlnaHQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5mdW5jQmFjaygpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQge1xyXG4gICAgQWN0aXZhdGlvbkZ1bmN0aW9uLFxyXG4gICAgQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZVxyXG59IGZyb20gJy4vYWN0aXZhdGlvbi1mdW5jdGlvbnMvYWN0aXZhdGlvbi1mdW5jdGlvbic7XHJcblxyXG5leHBvcnQgY2xhc3MgU3luYXB0aWNQcm9jZXNzb3Ige1xyXG4gICAgYWN0aXZhdGlvbkZ1bmN0aW9uOiBBY3RpdmF0aW9uRnVuY3Rpb247XHJcbiAgICBlcnJvcjogbnVtYmVyO1xyXG4gICAgc3luYXBzZTogbnVtYmVyO1xyXG4gICAgZGF0YTogRmxvYXQ2NEFycmF5O1xyXG4gICAgbGVhcm5pbmdSYXRlOiBudW1iZXI7XHJcbiAgICBkZWx0YTogbnVtYmVyO1xyXG4gICAgb3V0cHV0RXhwZWN0ZWQ6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBhY3RpdmF0aW9uRnVuY3Rpb246IEFjdGl2YXRpb25GdW5jdGlvblR5cGUsXHJcbiAgICAgICAgbGVhcm5pbmdSYXRlOiBudW1iZXIgPSAwLjNcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMuZXJyb3IgPSAwO1xyXG4gICAgICAgIHRoaXMuYWN0aXZhdGlvbkZ1bmN0aW9uID0gQWN0aXZhdGlvbkZ1bmN0aW9uLmluaXQoYWN0aXZhdGlvbkZ1bmN0aW9uKTtcclxuICAgICAgICB0aGlzLnNldExlYXJuaW5nRmFjdG9yKGxlYXJuaW5nUmF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBvdXRwdXQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmF0aW9uRnVuY3Rpb24uYWN0aXZhdGlvbih0aGlzLnN5bmFwc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtGbG9hdDY0QXJyYXl9IHdlaWdodHNcclxuICAgICAqL1xyXG4gICAgcmVjYWxjdWxhdGVXZWlnaHRzKHdlaWdodHM6IEZsb2F0NjRBcnJheSkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gdGhpcy5vdXRwdXRFeHBlY3RlZCAtIHRoaXMub3V0cHV0KCk7XHJcbiAgICAgICAgdGhpcy5kZWx0YSA9IHRoaXMubGVhcm5pbmdSYXRlICogZXJyb3I7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2VpZ2h0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB3ZWlnaHRzW2ldICs9IHRoaXMuZGF0YVtpXSAqIHRoaXMuZGVsdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtGbG9hdDY0QXJyYXl9IHdlaWdodHNcclxuICAgICAqIEByZXR1cm5zXHJcbiAgICAgKi9cclxuICAgIGNhbGN1bGF0ZVN5bmFwc2VzKHdlaWdodHM6IEZsb2F0NjRBcnJheSwgdGhyZXNob2xkKSB7XHJcbiAgICAgICAgdGhpcy5zeW5hcHNlID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3ZWlnaHRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3luYXBzZSArPSB0aGlzLmRhdGFbaV0gKiB3ZWlnaHRzW2ldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zeW5hcHNlICs9IHRocmVzaG9sZDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgY2FsY3VsYXRlRXJyb3IoKSB7XHJcbiAgICAgICAgdGhpcy5lcnJvciA9IHRoaXMub3V0cHV0RXhwZWN0ZWQgLSB0aGlzLm91dHB1dCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBzZXREYXRhKGRhdGE6IEZsb2F0NjRBcnJheSkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGEuc2xpY2UoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0T3V0cHV0RXhwZWN0ZWQoZXhwZWN0ZWRPdXRwdXQpIHtcclxuICAgICAgICB0aGlzLm91dHB1dEV4cGVjdGVkID0gZXhwZWN0ZWRPdXRwdXQ7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHNldExlYXJuaW5nRmFjdG9yKGxlYXJuaW5nRmFjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5sZWFybmluZ1JhdGUgPSBsZWFybmluZ0ZhY3RvcjtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUGVyY2VwdHJvbiB9IGZyb20gJy4vcGVyY2VwdHJvbic7XHJcbmltcG9ydCB7IEJhY2twcm9wYWdhdGlvbiB9IGZyb20gJy4vYmFja3Byb3BhZ2F0aW9uJztcclxuXHJcbmV4cG9ydCB7IFBlcmNlcHRyb24sIEJhY2twcm9wYWdhdGlvbiB9O1xyXG4iLCJleHBvcnQgbmFtZXNwYWNlIEJpbmFyeSB7XHJcbiAgICBleHBvcnQgZnVuY3Rpb24gYWN0aXZhdGlvbihzeW5hcHNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHN5bmFwc2UgPj0gMCA/IDEgOiAwO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBuYW1lc3BhY2UgSHlwZXJib2xpY1RhbmdlbnQge1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFjdGl2YXRpb24oc3luYXBzZSkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnRhbmgoc3luYXBzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHByaW1lKHN5bmFwc2UpIHtcclxuICAgICAgICBjb25zdCBvdXRwdXQgPSBhY3RpdmF0aW9uKHN5bmFwc2UpO1xyXG5cclxuICAgICAgICByZXR1cm4gMS4wIC0gb3V0cHV0ICogb3V0cHV0O1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBuYW1lc3BhY2UgU2lnbW9pZGFsIHtcclxuICAgIGV4cG9ydCBmdW5jdGlvbiBhY3RpdmF0aW9uKHN5bmFwc2UpIHtcclxuICAgICAgICByZXR1cm4gMSAvICgxICsgTWF0aC5FICoqIC1zeW5hcHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gcHJpbWUoc3luYXBzZSkge1xyXG4gICAgICAgIGNvbnN0IGV4ID0gTWF0aC5FICoqIHN5bmFwc2U7XHJcblxyXG4gICAgICAgIHJldHVybiBleCAvIChleCArIDEpICoqIDI7XHJcbiAgICB9XHJcbn1cclxuIiwiLyoqXHJcbiAqIFJlY3RpZmllZCBMaW5lYXIgVW5pdCAoUmVMVSlcclxuICovXHJcbmV4cG9ydCBuYW1lc3BhY2UgUmVMVSB7XHJcbiAgICBleHBvcnQgZnVuY3Rpb24gYWN0aXZhdGlvbihzeW5hcHNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHN5bmFwc2UgPiAwID8gc3luYXBzZSA6IDA7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHByaW1lKHN5bmFwc2UpIHtcclxuICAgICAgICByZXR1cm4gc3luYXBzZTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEFjdGl2YXRpb25GdW5jdGlvblR5cGUgfSBmcm9tICcuL2FjdGl2YXRpb24tZnVuY3Rpb25zL2FjdGl2YXRpb24tZnVuY3Rpb24nO1xyXG5pbXBvcnQgeyBMYXllciB9IGZyb20gJy4vbGF5ZXInO1xyXG5pbXBvcnQgeyBOZXVyb24gfSBmcm9tICcuL25ldXJvbic7XHJcblxyXG5pbnRlcmZhY2UgTW9kZWxUeXBlIHtcclxuICAgIGxheWVyczogbnVtYmVyW107XHJcbiAgICB0aHJlc2hvbGRzOiBudW1iZXJbXVtdO1xyXG4gICAgd2VpZ2h0czogbnVtYmVyW11bXVtdO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQmFja3Byb3BhZ2F0aW9uQ29uZmlnIHtcclxuICAgIGVwb2NoczogbnVtYmVyO1xyXG4gICAgYWN0aXZhdGlvbkZ1bmN0aW9uPzogQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZTtcclxuICAgIGxlYXJuaW5nUmF0ZT86IG51bWJlcjtcclxuICAgIHZlcmJvc2U/OiBib29sZWFuO1xyXG59XHJcblxyXG4ndXNlIHN0cmljdCc7XHJcbmV4cG9ydCBjbGFzcyBCYWNrcHJvcGFnYXRpb24ge1xyXG4gICAgbGF5ZXJzOiBMYXllcjtcclxuICAgIGVwb2NoczogbnVtYmVyO1xyXG4gICAgYWN0aXZhdGlvbkZ1bmN0aW9uOiBBY3RpdmF0aW9uRnVuY3Rpb25UeXBlO1xyXG4gICAgZXJyb3I6IG51bWJlcjtcclxuICAgIHZlcmJvc2U6IGJvb2xlYW47XHJcblxyXG4gICAgaGlzdG9yeTogYW55O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNvbnN0cnV0b3JcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgY29uZmlnOiBCYWNrcHJvcGFnYXRpb25Db25maWcgPSB7XHJcbiAgICAgICAgICAgIGVwb2NoczogMTAwMCxcclxuICAgICAgICAgICAgYWN0aXZhdGlvbkZ1bmN0aW9uOiBBY3RpdmF0aW9uRnVuY3Rpb25UeXBlLlNJR01PSURBTCxcclxuICAgICAgICAgICAgbGVhcm5pbmdSYXRlOiAwLjMsXHJcbiAgICAgICAgICAgIHZlcmJvc2U6IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5lcnJvciA9IDA7XHJcbiAgICAgICAgdGhpcy5hY3RpdmF0aW9uRnVuY3Rpb24gPSBjb25maWcuYWN0aXZhdGlvbkZ1bmN0aW9uO1xyXG4gICAgICAgIHRoaXMubGF5ZXJzID0gbmV3IExheWVyKHRoaXMuYWN0aXZhdGlvbkZ1bmN0aW9uLCBjb25maWcubGVhcm5pbmdSYXRlKTtcclxuICAgICAgICB0aGlzLmVwb2NocyA9IGNvbmZpZy5lcG9jaHM7XHJcbiAgICAgICAgdGhpcy52ZXJib3NlID0gY29uZmlnLnZlcmJvc2U7XHJcbiAgICAgICAgdGhpcy5oaXN0b3J5ID0ge2xvc3M6IFtdfTtcclxuICAgIH1cclxuXHJcbiAgICBsZWFybihkYXRhc2V0OiBBcnJheTx7IGlucHV0OiBhbnk7IG91dHB1dDogbnVtYmVyIH0+KSB7XHJcbiAgICAgICAgdGhpcy5kYXRhc2V0SW5wdXRUb0Zsb2F0QXJyYXkoZGF0YXNldCk7XHJcblxyXG4gICAgICAgIHRoaXMucnVuRXBvY2goZGF0YXNldCk7XHJcbiAgICAgICAgbGV0IGNvdW50ZXJFcG9jaHMgPSAxO1xyXG5cclxuICAgICAgICB3aGlsZSAoY291bnRlckVwb2NocyA8PSB0aGlzLmVwb2Nocykge1xyXG4gICAgICAgICAgICB0aGlzLmhpc3RvcnkubG9zcy5wdXNoKHRoaXMuZXJyb3IpO1xyXG5cclxuICAgICAgICAgICAgY291bnRlckVwb2NocysrO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudmVyYm9zZSAmJiBjb3VudGVyRXBvY2hzICUgMTAwMCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5lcnJvciwgY291bnRlckVwb2Nocyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGlmICh0aGlzLmVycm9yIDwgMC4wMDAxKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBicmVhaztcclxuICAgICAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5ydW5FcG9jaChkYXRhc2V0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHByb2Nlc3MoZGF0YSkge1xyXG4gICAgICAgIGxldCBvdXRwdXRzOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgICAgIGRhdGEgPSBuZXcgRmxvYXQ2NEFycmF5KGRhdGEpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy52ZXJib3NlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5sYXllcnMuZm9yRWFjaCgobGF5ZXI6IE5ldXJvbltdKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChvdXRwdXRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgRmxvYXQ2NEFycmF5KG91dHB1dHMpO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0cyA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxheWVycy5zeW5hcHRpY1Byb2Nlc3Nvci5zZXREYXRhKGRhdGEpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGxheWVyLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV1cm9uID0gbGF5ZXJbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0c1tpbmRleF0gPSBuZXVyb24ucHJvY2VzcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnZlcmJvc2UpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cob3V0cHV0cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb3V0cHV0cztcclxuICAgIH1cclxuXHJcbiAgICBhZGRMYXllcihudW1iZXJOZXVyb25zOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmxheWVycy5hZGQobnVtYmVyTmV1cm9ucyk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHt7IGxheWVyczogbnVtYmVyW107IHdlaWdodHM6IG51bWJlcltdW10gfX0gbW9kZWxcclxuICAgICAqIEByZXR1cm5zIHt0aGlzfVxyXG4gICAgICovXHJcbiAgICBpbXBvcnRNb2RlbChtb2RlbDogTW9kZWxUeXBlKTogdGhpcyB7XHJcbiAgICAgICAgbW9kZWwubGF5ZXJzLmZvckVhY2gobGF5ZXIgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFkZExheWVyKGxheWVyKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbW9kZWwud2VpZ2h0cy5mb3JFYWNoKChsYXllcldlaWdodHMsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubGF5ZXJzLmdldChpbmRleCkuZm9yRWFjaCgobmV1cm9uOiBOZXVyb24sIG5ldXJvbkluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXVyb25cclxuICAgICAgICAgICAgICAgICAgICAuc2V0V2VpZ2h0cyhuZXcgRmxvYXQ2NEFycmF5KGxheWVyV2VpZ2h0c1tuZXVyb25JbmRleF0pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCZWZvcmVXZWlnaHRzKG5ldXJvbi53ZWlnaHRzLnNsaWNlKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRocmVzaG9sZChtb2RlbC50aHJlc2hvbGRzW2luZGV4XVtuZXVyb25JbmRleF0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7TW9kZWxUeXBlfVxyXG4gICAgICovXHJcbiAgICBleHBvcnRNb2RlbCgpOiBNb2RlbFR5cGUge1xyXG4gICAgICAgIGxldCBtb2RlbDogTW9kZWxUeXBlID0ge1xyXG4gICAgICAgICAgICBsYXllcnM6IFtdLFxyXG4gICAgICAgICAgICB0aHJlc2hvbGRzOiBbXSxcclxuICAgICAgICAgICAgd2VpZ2h0czogW11cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmxheWVycy5mb3JFYWNoKGxheWVyID0+IHtcclxuICAgICAgICAgICAgbW9kZWwubGF5ZXJzLnB1c2gobGF5ZXIubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4TGF5ZXJUaHJlc2hvbGRzID0gbW9kZWwudGhyZXNob2xkcy5wdXNoKFtdKTtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXhMYXllcldlaWdodHMgPSBtb2RlbC53ZWlnaHRzLnB1c2goW10pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGxheWVyVGhyZXNob2xkcyA9IG1vZGVsLnRocmVzaG9sZHNbaW5kZXhMYXllclRocmVzaG9sZHMgLSAxXTtcclxuICAgICAgICAgICAgbGV0IGxheWVyV2VpZ2h0cyA9IG1vZGVsLndlaWdodHNbaW5kZXhMYXllcldlaWdodHMgLSAxXTtcclxuXHJcbiAgICAgICAgICAgIGxheWVyLmZvckVhY2gobmV1cm9uID0+IHtcclxuICAgICAgICAgICAgICAgIGxheWVyV2VpZ2h0cy5wdXNoKEFycmF5LmZyb20obmV1cm9uLndlaWdodHMpKTtcclxuICAgICAgICAgICAgICAgIGxheWVyVGhyZXNob2xkcy5wdXNoKG5ldXJvbi50aHJlc2hvbGQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1vZGVsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtBcnJheTx7IGlucHV0OiBhbnk7IG91dHB1dDogbnVtYmVyIH0+fSBkYXRhc2V0XHJcbiAgICAgKi9cclxuICAgIGRhdGFzZXRJbnB1dFRvRmxvYXRBcnJheShkYXRhc2V0OiBBcnJheTx7IGlucHV0OiBhbnk7IG91dHB1dDogbnVtYmVyIH0+KSB7XHJcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGRhdGFzZXQubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBkYXRhc2V0W2luZGV4XTtcclxuICAgICAgICAgICAgZGF0YS5pbnB1dCA9IG5ldyBGbG9hdDY0QXJyYXkoZGF0YS5pbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBwYXJhbSB7QXJyYXk8eyBpbnB1dDogRmxvYXQ2NEFycmF5OyBvdXRwdXQ6IG51bWJlciB9Pn0gZGF0YXNldFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJ1bkVwb2NoKGRhdGFzZXQ6IEFycmF5PHsgaW5wdXQ6IEZsb2F0NjRBcnJheTsgb3V0cHV0OiBudW1iZXIgfT4pIHtcclxuICAgICAgICBmb3IgKGxldCBkYXRhSWR4ID0gMDsgZGF0YUlkeCA8IGRhdGFzZXQubGVuZ3RoOyBkYXRhSWR4KyspIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGRhdGFzZXRbZGF0YUlkeF07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZvcndhcmRwcm9wYWdhdGlvbihkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5iYWNrcHJvcGFnYXRpb24oZGF0YS5vdXRwdXQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5sYXllcnMuZm9yRWFjaChsYXllciA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBuZXVyb25JZHggPSAwOyBuZXVyb25JZHggPCBsYXllci5sZW5ndGg7IG5ldXJvbklkeCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV1cm9uID0gbGF5ZXJbbmV1cm9uSWR4XTtcclxuICAgICAgICAgICAgICAgICAgICBuZXVyb24ucmVjYWxjdWxhdGVXZWlnaHRzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0geyp9IHsgaW5wdXQsIG91dHB1dCB9XHJcbiAgICAgKiBAcmV0dXJuc1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGZvcndhcmRwcm9wYWdhdGlvbih7IGlucHV0IH06IGFueSkge1xyXG4gICAgICAgIGxldCBvdXRwdXRzID0gW107XHJcbiAgICAgICAgbGV0IGRhdGEgPSBuZXcgRmxvYXQ2NEFycmF5KGlucHV0KTtcclxuXHJcbiAgICAgICAgdGhpcy5sYXllcnMuZm9yRWFjaCgobGF5ZXI6IE5ldXJvbltdKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChvdXRwdXRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgRmxvYXQ2NEFycmF5KG91dHB1dHMpO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0cyA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxheWVycy5zeW5hcHRpY1Byb2Nlc3Nvci5zZXREYXRhKGRhdGEpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGxheWVyLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV1cm9uID0gbGF5ZXJbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0c1tpbmRleF0gPSBuZXVyb24ubGVhcm4oKS5vdXRwdXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3V0cHV0XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYmFja3Byb3BhZ2F0aW9uKG91dHB1dDogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgbGFzdExheWVyID0gdGhpcy5sYXllcnMuZ2V0TGFzdCgpO1xyXG4gICAgICAgIGxldCBzdW1FcnJvcnMgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbGFzdExheWVyLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICBjb25zdCBuZXVyb24gPSBsYXN0TGF5ZXJbaW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgbmV1cm9uLmNhbGN1bGF0ZUVycm9yT2ZPdXRwdXQob3V0cHV0KTtcclxuICAgICAgICAgICAgbmV1cm9uLmJhY2twcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgc3VtRXJyb3JzICs9IG5ldXJvbi5lcnJvciAqIG5ldXJvbi5lcnJvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZXJyb3IgPSBzdW1FcnJvcnMgLyAyO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEFjdGl2YXRpb25GdW5jdGlvblR5cGUgfSBmcm9tICcuL2FjdGl2YXRpb24tZnVuY3Rpb25zL2FjdGl2YXRpb24tZnVuY3Rpb24nO1xyXG5pbXBvcnQgeyBOZXVyb24gfSBmcm9tICcuL25ldXJvbic7XHJcbmltcG9ydCB7IFN5bmFwdGljUHJvY2Vzc29yIH0gZnJvbSAnLi9zeW5hcHRpYy1wcm9jZXNzb3InO1xyXG5cclxuZXhwb3J0IGNsYXNzIExheWVyIHtcclxuICAgIHByaXZhdGUgbGF5ZXJzOiBOZXVyb25bXVtdO1xyXG4gICAgcHJpdmF0ZSBhY3RpdmF0aW9uRnVuY3Rpb246IEFjdGl2YXRpb25GdW5jdGlvblR5cGU7XHJcblxyXG4gICAgc3luYXB0aWNQcm9jZXNzb3I6IFN5bmFwdGljUHJvY2Vzc29yO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIGFjdGl2YXRpb25GdW5jdGlvbjogQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZSA9IEFjdGl2YXRpb25GdW5jdGlvblR5cGUuU0lHTU9JREFMLFxyXG4gICAgICAgIGxlYXJuaW5nUmF0ZTogbnVtYmVyXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLmxheWVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuYWN0aXZhdGlvbkZ1bmN0aW9uID0gYWN0aXZhdGlvbkZ1bmN0aW9uO1xyXG4gICAgICAgIHRoaXMuc3luYXB0aWNQcm9jZXNzb3IgPSBuZXcgU3luYXB0aWNQcm9jZXNzb3IoXHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZhdGlvbkZ1bmN0aW9uLFxyXG4gICAgICAgICAgICBsZWFybmluZ1JhdGVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG51bWJlck5ldXJvbnNcclxuICAgICAqIEByZXR1cm5zXHJcbiAgICAgKi9cclxuICAgIGFkZChudW1iZXJOZXVyb25zOiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBsYXllciA9IHRoaXMuY3JlYXRlKG51bWJlck5ldXJvbnMpO1xyXG4gICAgICAgIGNvbnN0IGluZGV4TmV3TGF5ZXIgPSB0aGlzLmxheWVycy5wdXNoKGxheWVyKSAtIDE7XHJcbiAgICAgICAgY29uc3QgYmVmb3JlTGF5ZXIgPSB0aGlzLmxheWVyc1tpbmRleE5ld0xheWVyIC0gMV07XHJcblxyXG4gICAgICAgIGlmIChiZWZvcmVMYXllciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXB1bnRhciBjb24gY2FkYSBOZXVyb24gZGUgbGEgbnVldmEgY2FwYSBhIGxhIGFudGVyaW9yXHJcbiAgICAgICAgbGF5ZXIuZm9yRWFjaCgobmV1cm9uOiBOZXVyb24pID0+IHtcclxuICAgICAgICAgICAgbmV1cm9uLmlucHV0TmV1cm9ucyA9IGJlZm9yZUxheWVyO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBBcHVudGFyIGNvbiBjYWRhIG5ldXJvbmEgZGUgbGEgY2FwYSBhbnRlcmlvciBhIGxhIG51ZXZhIGNhcGFcclxuICAgICAgICBiZWZvcmVMYXllci5mb3JFYWNoKChuZXVyb246IE5ldXJvbikgPT4ge1xyXG4gICAgICAgICAgICBuZXVyb24ub3V0cHV0TmV1cm9ucyA9IGxheWVyO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBmb3JFYWNoKGNhbGxiYWNrOiAobGF5ZXI6IE5ldXJvbltdLCBpbmRleD86IG51bWJlcikgPT4gdm9pZCkge1xyXG4gICAgICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IHRoaXMubGF5ZXJzLmxlbmd0aDsgaWR4KyspIHtcclxuICAgICAgICAgICAgY2FsbGJhY2sodGhpcy5sYXllcnNbaWR4XSwgaWR4KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcclxuICAgICAqIEByZXR1cm5zIHtOZXVyb25bXX1cclxuICAgICAqL1xyXG4gICAgZ2V0KGluZGV4OiBudW1iZXIpOiBOZXVyb25bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5ZXJzW2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIHtOZXVyb25bXX1cclxuICAgICAqL1xyXG4gICAgZ2V0TGFzdCgpOiBOZXVyb25bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMubGF5ZXJzLmxlbmd0aCAtIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBudW1iZXJOZXVyb25zXHJcbiAgICAgKiBAcmV0dXJucyB7TmV1cm9uW119XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY3JlYXRlKG51bWJlck5ldXJvbnM6IG51bWJlcik6IE5ldXJvbltdIHtcclxuICAgICAgICBjb25zdCBsYXllcjogTmV1cm9uW10gPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJOZXVyb25zOyBpKyspIHtcclxuICAgICAgICAgICAgbGF5ZXJbaV0gPSBuZXcgTmV1cm9uKHRoaXMuYWN0aXZhdGlvbkZ1bmN0aW9uKTtcclxuICAgICAgICAgICAgbGF5ZXJbaV0uc3luYXB0aWNQcm9jZXNzb3IgPSB0aGlzLnN5bmFwdGljUHJvY2Vzc29yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGxheWVyO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEFjdGl2YXRpb25GdW5jdGlvblR5cGUgfSBmcm9tICcuL2FjdGl2YXRpb24tZnVuY3Rpb25zL2FjdGl2YXRpb24tZnVuY3Rpb24nO1xyXG5pbXBvcnQgeyBQZXJjZXB0cm9uIH0gZnJvbSAnLi9wZXJjZXB0cm9uJztcclxuXHJcbmV4cG9ydCBjbGFzcyBOZXVyb24gZXh0ZW5kcyBQZXJjZXB0cm9uIHtcclxuICAgIGJlZm9yZVdlaWdodHM6IEZsb2F0NjRBcnJheTtcclxuICAgIGVycm9yOiBudW1iZXI7XHJcbiAgICBpbnB1dE5ldXJvbnM6IE5ldXJvbltdO1xyXG4gICAgb3V0cHV0TmV1cm9uczogTmV1cm9uW107XHJcbiAgICBzeW5hcHNlOiBudW1iZXI7XHJcbiAgICBjdXJyZW50RGF0YTogRmxvYXQ2NEFycmF5O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNvbnN0cnV0b3JcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgYWN0aXZhdGlvbkZ1bmN0aW9uOiBBY3RpdmF0aW9uRnVuY3Rpb25UeXBlID0gQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZS5TSUdNT0lEQUxcclxuICAgICkge1xyXG4gICAgICAgIHN1cGVyKGFjdGl2YXRpb25GdW5jdGlvbik7XHJcblxyXG4gICAgICAgIHRoaXMuZXJyb3IgPSAwO1xyXG4gICAgICAgIHRoaXMuc3luYXBzZSA9IDA7XHJcbiAgICAgICAgdGhpcy5vdXRwdXROZXVyb25zID0gW107XHJcbiAgICAgICAgdGhpcy5pbnB1dE5ldXJvbnMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBsZWFybihjdXJyZW50RGF0YT86IEZsb2F0NjRBcnJheSkge1xyXG4gICAgICAgIGlmIChjdXJyZW50RGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLnN5bmFwdGljUHJvY2Vzc29yLmRhdGEgPSBjdXJyZW50RGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jdXJyZW50RGF0YSA9IHRoaXMuc3luYXB0aWNQcm9jZXNzb3IuZGF0YTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLndlaWdodHMpIHtcclxuICAgICAgICAgICAgdGhpcy5hc3NpZ25XZWlnaHRzKHRoaXMuY3VycmVudERhdGEubGVuZ3RoKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRCZWZvcmVXZWlnaHRzKHRoaXMud2VpZ2h0cy5zbGljZSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3luYXB0aWNQcm9jZXNzb3IuY2FsY3VsYXRlU3luYXBzZXModGhpcy53ZWlnaHRzLCB0aGlzLnRocmVzaG9sZCk7XHJcbiAgICAgICAgdGhpcy5zeW5hcHNlID0gdGhpcy5zeW5hcHRpY1Byb2Nlc3Nvci5zeW5hcHNlO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEVycm9yIG9uIGhpZGRlbiBsYXllcnNcclxuICAgICAqL1xyXG4gICAgYmFja3Byb3BhZ2F0aW9uKCkge1xyXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmlucHV0TmV1cm9ucy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgdGhpcy5pbnB1dE5ldXJvbnNbaW5kZXhdLmNhbGN1bGF0ZUhpZGRlbkVycm9yKGluZGV4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlucHV0TmV1cm9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXROZXVyb25zWzBdLmJhY2twcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZWNhbGN1bGF0ZVdlaWdodHMoKSB7XHJcbiAgICAgICAgY29uc3QgZGVsdGEgPSB0aGlzLnN5bmFwdGljUHJvY2Vzc29yLmxlYXJuaW5nUmF0ZSAqIHRoaXMuZXJyb3I7XHJcbiAgICAgICAgY29uc3QgbW9tZW50dW1GYWN0b3IgPSAwLjc3O1xyXG4gICAgICAgIGxldCBkZWx0YVdlaWdodHM6IG51bWJlciA9IDA7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy53ZWlnaHRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnREYXRhW2ldID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGVsdGFXZWlnaHRzID1cclxuICAgICAgICAgICAgICAgIG1vbWVudHVtRmFjdG9yICogKHRoaXMud2VpZ2h0c1tpXSAtIHRoaXMuYmVmb3JlV2VpZ2h0c1tpXSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmJlZm9yZVdlaWdodHNbaV0gPSB0aGlzLndlaWdodHNbaV07XHJcbiAgICAgICAgICAgIHRoaXMud2VpZ2h0c1tpXSArPSB0aGlzLmN1cnJlbnREYXRhW2ldICogZGVsdGEgKyBkZWx0YVdlaWdodHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRocmVzaG9sZCArPSBkZWx0YTtcclxuICAgIH1cclxuXHJcbiAgICBvdXRwdXQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zeW5hcHRpY1Byb2Nlc3Nvci5hY3RpdmF0aW9uRnVuY3Rpb24uYWN0aXZhdGlvbihcclxuICAgICAgICAgICAgdGhpcy5zeW5hcHNlXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm9jZXNzKCkge1xyXG4gICAgICAgIHRoaXMuc3luYXB0aWNQcm9jZXNzb3IuY2FsY3VsYXRlU3luYXBzZXModGhpcy53ZWlnaHRzLCB0aGlzLnRocmVzaG9sZCk7XHJcbiAgICAgICAgdGhpcy5zeW5hcHNlID0gdGhpcy5zeW5hcHRpY1Byb2Nlc3Nvci5zeW5hcHNlO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5vdXRwdXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBjYWxjdWxhdGVFcnJvck9mT3V0cHV0KG91dHB1dEV4cGVjdGVkKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBvdXRwdXRFeHBlY3RlZCAtIHRoaXMub3V0cHV0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlRXJyb3JEZXJpdmF0ZWQoZXJyb3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbGN1bGF0ZUhpZGRlbkVycm9yKG5ldXJvbkluZGV4KSB7XHJcbiAgICAgICAgbGV0IHN1bUVycm9yID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMub3V0cHV0TmV1cm9ucy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgY29uc3QgbmV1cm9uID0gdGhpcy5vdXRwdXROZXVyb25zW2luZGV4XTtcclxuICAgICAgICAgICAgc3VtRXJyb3IgKz0gbmV1cm9uLndlaWdodHNbbmV1cm9uSW5kZXhdICogbmV1cm9uLmVycm9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVFcnJvckRlcml2YXRlZChzdW1FcnJvcik7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbGN1bGF0ZUVycm9yRGVyaXZhdGVkKGZhY3RvckRlbHRhKSB7XHJcbiAgICAgICAgdGhpcy5lcnJvciA9IGZhY3RvckRlbHRhICogdGhpcy5wcmltZSgpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIHByaW1lKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3luYXB0aWNQcm9jZXNzb3IuYWN0aXZhdGlvbkZ1bmN0aW9uLnByaW1lKHRoaXMuc3luYXBzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge0Zsb2F0NjRBcnJheX0gYmVmb3JlV2VpZ2h0c1xyXG4gICAgICogQHJldHVybnMge3RoaXN9XHJcbiAgICAgKi9cclxuICAgIHNldEJlZm9yZVdlaWdodHMoYmVmb3JlV2VpZ2h0czogRmxvYXQ2NEFycmF5KTogdGhpcyB7XHJcbiAgICAgICAgdGhpcy5iZWZvcmVXZWlnaHRzID0gYmVmb3JlV2VpZ2h0cztcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7dGhpc31cclxuICAgICAqL1xyXG4gICAgc2V0VGhyZXNob2xkKHRocmVzaG9sZDogbnVtYmVyKTogdGhpcyB7XHJcbiAgICAgICAgdGhpcy50aHJlc2hvbGQgPSB0aHJlc2hvbGQ7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=