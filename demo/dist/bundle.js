!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var s=e();for(var r in s)("object"==typeof exports?exports:t)[r]=s[r]}}(window,function(){return function(t){var e={};function s(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=t,s.c=e,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(r,i,function(e){return t[e]}.bind(null,i));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=10)}([function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(9),i=s(8),n=s(7),o=s(6);var a;!function(t){t.BINARY="BINARY",t.RELU="RELU",t.SIGMOIDAL="SIGMOIDAL",t.HYPERBOLIC_TANGENT="HYPERBOLIC_TANGENT"}(a=e.ActivationFunctionType||(e.ActivationFunctionType={}));const c={[a.BINARY]:r.Binary,[a.RELU]:n.ReLU,[a.SIGMOIDAL]:o.Sigmoidal,[a.HYPERBOLIC_TANGENT]:i.HyperbolicTangent};class h{constructor(t=a.BINARY){this.default=t,this.setCallback(),this.setCallbackPrime(),this.cache={activation:{sypnase:null,value:null},prime:{sypnase:null,value:null}}}static init(t){return new h(t)}activation(t){return this.cache.activation.sypnase!==t&&(this.cache.activation.sypnase=t,this.cache.activation.value=this.callback(t)),this.cache.activation.value}prime(t){return this.cache.prime.sypnase!==t&&(this.cache.prime.sypnase=t,this.cache.prime.value=this.callbackPrime(t)),this.cache.prime.value}setCallback(){this.callback=c[this.default].activation}setCallbackPrime(){this.callbackPrime=c[this.default].prime}}e.ActivationFunction=h},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(0);e.SynapticProcessor=class{constructor(t,e=.3){this.error=0,this.activationFunction=r.ActivationFunction.init(t),this.setLearningFactor(e)}output(){return this.activationFunction.activation(this.synapse)}recalculateWeights(t){const e=this.outputExpected-this.output();this.delta=this.learningRate*e;for(let e=0;e<t.length;e++)t[e]+=this.data[e]*this.delta}calculateSynapses(t,e=0){this.synapse=0;for(let e=0;e<t.length;e++)this.synapse+=this.data[e]*t[e];return this.synapse+=e,this}calculateError(){return this.error=this.outputExpected-this.output(),this}setData(t){return null===t?this:(this.data=t.slice(),this)}setOutputExpected(t){return this.outputExpected=t,this}setLearningFactor(t){return this.learningRate=t,this}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(1),i=8e3;e.Perceptron=class{constructor(t,e=(()=>{})){this.counterErrors=0,this.hasError=!1,this.weights=null,this.funcBack=e,this.synapticProcessor=new r.SynapticProcessor(t),this.dataStack=[]}addData(t,e){return this.dataStack.push([t,e]),this}learn(){this.weights||this.assignWeights(),this.hasError=!1;for(let t=0;t<this.dataStack.length;t++)this.synapticProcessor.setData(this.dataStack[t][0]).setOutputExpected(this.dataStack[t][1]).calculateSynapses(this.weights,this.threshold).calculateError(),0!==this.synapticProcessor.error&&(this.synapticProcessor.recalculateWeights(this.weights),this.threshold+=this.synapticProcessor.delta,this.hasError=!0,this.funcBack());if(this.hasError){if(this.counterErrors++,this.counterErrors>=i)throw this.counterErrors=0,Error("Maximum error limit reached");return this.learn()}return this.counterErrors=0,this}process(t){return this.synapticProcessor.setData(t).calculateSynapses(this.weights,this.threshold).output()}setWeights(t){return this.weights=t,this}createWeight(){const t=-.5,e=.49-t;let s=0;for(;!s;)s=parseFloat((Math.random()*e+t).toFixed(4));return s}assignWeights(t=null){t||(t=this.dataStack[0][0].length);const e=new Float64Array(t);for(let s=0;s<t;s++)e[s]=this.createWeight();return this.setWeights(e),this.threshold=this.createWeight(),this.funcBack(),this}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(0),i=s(2);e.Neuron=class extends i.Perceptron{constructor(t=r.ActivationFunctionType.SIGMOIDAL){super(t),this.error=0,this.outputNeurons=[],this.inputNeurons=[]}learn(){return this.currentData=this.synapticProcessor.data,this.weights||(this.assignWeights(this.currentData.length),this.setBeforeWeights(this.weights.slice())),this.synapticProcessor.calculateSynapses(this.weights,this.threshold),this.synapse=this.synapticProcessor.synapse,this}backpropagation(){for(let t=0;t<this.inputNeurons.length;t++)this.inputNeurons[t].calculateHiddenError(t);this.inputNeurons.length>0&&this.inputNeurons[0].backpropagation()}recalculateWeights(){const t=this.synapticProcessor.learningRate*this.error;let e=0;for(let s=0;s<this.weights.length;s++)0!==this.currentData[s]&&(e=.77*(this.weights[s]-this.beforeWeights[s]),this.beforeWeights[s]=this.weights[s],this.weights[s]+=this.currentData[s]*t+e);this.threshold+=t}output(){return this.synapticProcessor.activationFunction.activation(this.synapse)}process(){return this.synapticProcessor.calculateSynapses(this.weights,this.threshold),this.synapse=this.synapticProcessor.synapse,this.output()}calculateErrorOfOutput(t){const e=t-this.output();this.calculateErrorDerivated(e)}calculateHiddenError(t){let e=0;for(let s=0;s<this.outputNeurons.length;s++){const r=this.outputNeurons[s];e+=r.weights[t]*r.error}return this.calculateErrorDerivated(e),this}calculateErrorDerivated(t){return this.error=t*this.prime(),this}prime(){return this.synapticProcessor.activationFunction.prime(this.synapse)}setBeforeWeights(t){return this.beforeWeights=t,this}setThreshold(t=this.createWeight()){return this.threshold=t,this}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(0),i=s(3),n=s(1);e.Layer=class{constructor(t=r.ActivationFunctionType.SIGMOIDAL,e){this.layers=[],this.activationFunction=t,this.synapticProcessor=new n.SynapticProcessor(this.activationFunction,e)}add(t){const e=this.create(t),s=this.layers.push(e)-1,r=this.layers[s-1];return void 0===r?this:(e.forEach(t=>{t.inputNeurons=r}),r.forEach(t=>{t.outputNeurons=e}),this)}forEach(t){for(let e=0;e<this.layers.length;e++)t(this.layers[e],e)}get(t){return this.layers[t]}getLast(){return this.get(this.layers.length-1)}create(t){const e=[];for(let s=0;s<t;s++)e[s]=new i.Neuron(this.activationFunction),e[s].synapticProcessor=this.synapticProcessor;return e}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(0),i=s(4);e.Backpropagation=class{constructor(t={epochs:1e3,activationFunction:r.ActivationFunctionType.SIGMOIDAL,learningRate:.3}){this.error=0,this.activationFunction=t.activationFunction,this.layers=new i.Layer(this.activationFunction,t.learningRate),this.epochs=t.epochs}learn(t){this.datasetInputToFloatArray(t),this.runEpoch(t);let e=1;for(;e<=this.epochs;)++e%1e3==0&&console.log(this.error,e),this.runEpoch(t);return this}process(t){let e=[];return t=new Float64Array(t),this.layers.forEach(s=>{e.length>0&&(t=new Float64Array(e),e=[]),this.layers.synapticProcessor.setData(t);for(let t=0;t<s.length;t++){const r=s[t];e[t]=r.process()}}),e}addLayer(t){return this.layers.add(t),this}importModel(t){return t.layers.forEach(t=>{this.addLayer(t)}),t.weights.forEach((e,s)=>{this.layers.get(s).forEach((r,i)=>{r.setWeights(new Float64Array(e[i])).setBeforeWeights(r.weights.slice()).setThreshold(t.thresholds[s][i])})}),this}exportModel(){let t={layers:[],thresholds:[],weights:[]};return this.layers.forEach(e=>{t.layers.push(e.length);const s=t.thresholds.push([]),r=t.weights.push([]);let i=t.thresholds[s-1],n=t.weights[r-1];e.forEach(t=>{n.push(Array.from(t.weights)),i.push(t.threshold)})}),t}datasetInputToFloatArray(t){for(let e=0;e<t.length;e++){const s=t[e];s.input=new Float64Array(s.input)}}runEpoch(t){for(let e=0;e<t.length;e++){const s=t[e];this.forwardpropagation(s),this.backpropagation(s.output),this.layers.forEach(t=>{for(let e=0;e<t.length;e++)t[e].recalculateWeights()})}}forwardpropagation({input:t}){let e=[],s=new Float64Array(t);return this.layers.forEach(t=>{e.length>0&&(s=new Float64Array(e),e=[]),this.layers.synapticProcessor.setData(s);for(let s=0;s<t.length;s++){const r=t[s];e[s]=r.learn().output()}}),this}backpropagation(t){const e=this.layers.getLast();let s=0;for(let r=0;r<e.length;r++){const i=e[r];i.calculateErrorOfOutput(t),i.backpropagation(),s+=i.error*i.error}this.error=s/2}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.activation=function(t){return 1/(1+Math.E**-t)},t.prime=function(t){const e=Math.E**t;return e/(e+1)**2}}(e.Sigmoidal||(e.Sigmoidal={}))},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.activation=function(t){return t>=0?t:0}}(e.ReLU||(e.ReLU={}))},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function e(t){return Math.tanh(t)}t.activation=e,t.prime=function(t){const s=e(t);return 1-s*s}}(e.HyperbolicTangent||(e.HyperbolicTangent={}))},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.activation=function(t){return t>=0?1:0}}(e.Binary||(e.Binary={}))},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(2);e.Perceptron=r.Perceptron;const i=s(5);e.Backpropagation=i.Backpropagation}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vLi9zcmMvYWN0aXZhdGlvbi1mdW5jdGlvbnMvYWN0aXZhdGlvbi1mdW5jdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc3luYXB0aWMtcHJvY2Vzc29yLnRzIiwid2VicGFjazovLy8uL3NyYy9wZXJjZXB0cm9uLnRzIiwid2VicGFjazovLy8uL3NyYy9uZXVyb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xheWVyLnRzIiwid2VicGFjazovLy8uL3NyYy9iYWNrcHJvcGFnYXRpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGl2YXRpb24tZnVuY3Rpb25zL3NpZ21vaWRhbC5mdW5jdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWN0aXZhdGlvbi1mdW5jdGlvbnMvcmVsdS5mdW5jdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWN0aXZhdGlvbi1mdW5jdGlvbnMvaHlwZXJib2xpYy10YW5nZW50LmZ1bmN0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9hY3RpdmF0aW9uLWZ1bmN0aW9ucy9iaW5hcnkuZnVuY3Rpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsImEiLCJpIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiYmluYXJ5X2Z1bmN0aW9uXzEiLCJoeXBlcmJvbGljX3RhbmdlbnRfZnVuY3Rpb25fMSIsInJlbHVfZnVuY3Rpb25fMSIsInNpZ21vaWRhbF9mdW5jdGlvbl8xIiwiQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZSIsImNhbGxiYWNrIiwiW29iamVjdCBPYmplY3RdIiwiQklOQVJZIiwiQmluYXJ5IiwiUkVMVSIsIlJlTFUiLCJTSUdNT0lEQUwiLCJTaWdtb2lkYWwiLCJIWVBFUkJPTElDX1RBTkdFTlQiLCJIeXBlcmJvbGljVGFuZ2VudCIsIkFjdGl2YXRpb25GdW5jdGlvbiIsImZ1bmN0aW9uTmFtZSIsInRoaXMiLCJkZWZhdWx0Iiwic2V0Q2FsbGJhY2siLCJzZXRDYWxsYmFja1ByaW1lIiwiY2FjaGUiLCJhY3RpdmF0aW9uIiwic3lwbmFzZSIsInByaW1lIiwic3luYXBzZSIsImNhbGxiYWNrUHJpbWUiLCJhY3RpdmF0aW9uX2Z1bmN0aW9uXzEiLCJTeW5hcHRpY1Byb2Nlc3NvciIsImFjdGl2YXRpb25GdW5jdGlvbiIsImxlYXJuaW5nUmF0ZSIsImVycm9yIiwiaW5pdCIsInNldExlYXJuaW5nRmFjdG9yIiwid2VpZ2h0cyIsIm91dHB1dEV4cGVjdGVkIiwib3V0cHV0IiwiZGVsdGEiLCJsZW5ndGgiLCJkYXRhIiwidGhyZXNob2xkIiwic2xpY2UiLCJleHBlY3RlZE91dHB1dCIsImxlYXJuaW5nRmFjdG9yIiwic3luYXB0aWNfcHJvY2Vzc29yXzEiLCJMSU1JVF9FUlJPUlMiLCJQZXJjZXB0cm9uIiwiY291bnRlckVycm9ycyIsImhhc0Vycm9yIiwiZnVuY0JhY2siLCJzeW5hcHRpY1Byb2Nlc3NvciIsImRhdGFTdGFjayIsInB1c2giLCJhc3NpZ25XZWlnaHRzIiwic2V0RGF0YSIsInNldE91dHB1dEV4cGVjdGVkIiwiY2FsY3VsYXRlU3luYXBzZXMiLCJjYWxjdWxhdGVFcnJvciIsInJlY2FsY3VsYXRlV2VpZ2h0cyIsIkVycm9yIiwibGVhcm4iLCJyYW5nZVdlaWdodCIsInJhbmdlRGlmZiIsIndlaWdodCIsInBhcnNlRmxvYXQiLCJNYXRoIiwicmFuZG9tIiwidG9GaXhlZCIsImRhdGFTaXplIiwiRmxvYXQ2NEFycmF5IiwiY3JlYXRlV2VpZ2h0Iiwic2V0V2VpZ2h0cyIsInBlcmNlcHRyb25fMSIsIk5ldXJvbiIsInN1cGVyIiwib3V0cHV0TmV1cm9ucyIsImlucHV0TmV1cm9ucyIsImN1cnJlbnREYXRhIiwic2V0QmVmb3JlV2VpZ2h0cyIsImluZGV4IiwiY2FsY3VsYXRlSGlkZGVuRXJyb3IiLCJiYWNrcHJvcGFnYXRpb24iLCJkZWx0YVdlaWdodHMiLCJiZWZvcmVXZWlnaHRzIiwiY2FsY3VsYXRlRXJyb3JEZXJpdmF0ZWQiLCJuZXVyb25JbmRleCIsInN1bUVycm9yIiwibmV1cm9uIiwiZmFjdG9yRGVsdGEiLCJuZXVyb25fMSIsIkxheWVyIiwibGF5ZXJzIiwibnVtYmVyTmV1cm9ucyIsImxheWVyIiwiaW5kZXhOZXdMYXllciIsImJlZm9yZUxheWVyIiwidW5kZWZpbmVkIiwiZm9yRWFjaCIsImlkeCIsImxheWVyXzEiLCJCYWNrcHJvcGFnYXRpb24iLCJjb25maWciLCJlcG9jaHMiLCJkYXRhc2V0IiwiZGF0YXNldElucHV0VG9GbG9hdEFycmF5IiwicnVuRXBvY2giLCJjb3VudGVyRXBvY2hzIiwiY29uc29sZSIsImxvZyIsIm91dHB1dHMiLCJwcm9jZXNzIiwiYWRkIiwibW9kZWwiLCJhZGRMYXllciIsImxheWVyV2VpZ2h0cyIsInNldFRocmVzaG9sZCIsInRocmVzaG9sZHMiLCJpbmRleExheWVyVGhyZXNob2xkcyIsImluZGV4TGF5ZXJXZWlnaHRzIiwibGF5ZXJUaHJlc2hvbGRzIiwiQXJyYXkiLCJmcm9tIiwiaW5wdXQiLCJkYXRhSWR4IiwiZm9yd2FyZHByb3BhZ2F0aW9uIiwibmV1cm9uSWR4IiwibGFzdExheWVyIiwiZ2V0TGFzdCIsInN1bUVycm9ycyIsImNhbGN1bGF0ZUVycm9yT2ZPdXRwdXQiLCJFIiwiZXgiLCJ0YW5oIiwiYmFja3Byb3BhZ2F0aW9uXzEiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0Esb0JBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELFNBQ0Esc0JBQUFHLGVBQUFDLElBQ0FELFVBQUFILE9BQ0EsQ0FDQSxJQUFBSyxFQUFBTCxJQUNBLFFBQUFNLEtBQUFELEdBQUEsaUJBQUFKLGdCQUFBRixHQUFBTyxHQUFBRCxFQUFBQyxJQVBBLENBU0NDLE9BQUEsV0FDRCxtQkNUQSxJQUFBQyxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBVCxRQUdBLElBQUFDLEVBQUFNLEVBQUFFLElBQ0FKLEVBQUFJLEVBQ0FDLEdBQUEsRUFDQVYsWUFVQSxPQU5BVyxFQUFBRixHQUFBRyxLQUFBWCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBUSxHQUdBUCxFQUFBUyxHQUFBLEVBR0FULEVBQUFELFFBMERBLE9BckRBUSxFQUFBSyxFQUFBRixFQUdBSCxFQUFBTSxFQUFBUCxFQUdBQyxFQUFBTyxFQUFBLFNBQUFmLEVBQUFnQixFQUFBQyxHQUNBVCxFQUFBVSxFQUFBbEIsRUFBQWdCLElBQ0FHLE9BQUFDLGVBQUFwQixFQUFBZ0IsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNULEVBQUFlLEVBQUEsU0FBQXZCLEdBQ0Esb0JBQUF3QixlQUFBQyxhQUNBTixPQUFBQyxlQUFBcEIsRUFBQXdCLE9BQUFDLGFBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBcEIsRUFBQSxjQUFpRDBCLE9BQUEsS0FRakRsQixFQUFBbUIsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQWxCLEVBQUFrQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9BQUFILEVBQ0EsSUFBQUksRUFBQVgsT0FBQVksT0FBQSxNQUdBLEdBRkF2QixFQUFBZSxFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxZQUFBLEVBQUFLLFVBQ3pDLEVBQUFFLEdBQUEsaUJBQUFGLEVBQUEsUUFBQU0sS0FBQU4sRUFBQWxCLEVBQUFPLEVBQUFlLEVBQUFFLEVBQUEsU0FBQUEsR0FBZ0gsT0FBQU4sRUFBQU0sSUFBcUJDLEtBQUEsS0FBQUQsSUFDckksT0FBQUYsR0FJQXRCLEVBQUEwQixFQUFBLFNBQUFqQyxHQUNBLElBQUFnQixFQUFBaEIsS0FBQTRCLFdBQ0EsV0FBMkIsT0FBQTVCLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQU8sRUFBQU8sRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBVCxFQUFBVSxFQUFBLFNBQUFpQixFQUFBQyxHQUFzRCxPQUFBakIsT0FBQWtCLFVBQUFDLGVBQUExQixLQUFBdUIsRUFBQUMsSUFHdEQ1QixFQUFBK0IsRUFBQSxHQUlBL0IsSUFBQWdDLEVBQUEsb0ZDbEZBLE1BQUFDLEVBQUFqQyxFQUFBLEdBQ0FrQyxFQUFBbEMsRUFBQSxHQUNBbUMsRUFBQW5DLEVBQUEsR0FDQW9DLEVBQUFwQyxFQUFBLEdBT0EsSUFBWXFDLEdBQVosU0FBWUEsR0FDUkEsRUFBQSxnQkFDQUEsRUFBQSxZQUNBQSxFQUFBLHNCQUNBQSxFQUFBLHdDQUpKLENBQVlBLEVBQUE3QyxFQUFBNkMseUJBQUE3QyxFQUFBNkMsNEJBT1osTUFBTUMsR0FDRkMsQ0FBQ0YsRUFBdUJHLFFBQVNQLEVBQUFRLE9BQ2pDRixDQUFDRixFQUF1QkssTUFBT1AsRUFBQVEsS0FDL0JKLENBQUNGLEVBQXVCTyxXQUFZUixFQUFBUyxVQUNwQ04sQ0FBQ0YsRUFBdUJTLG9CQUFxQlosRUFBQWEseUJBR2pEQyxFQU1JVCxZQUNJVSxFQUF1Q1osRUFBdUJHLFFBRTlEVSxLQUFLQyxRQUFVRixFQUNmQyxLQUFLRSxjQUNMRixLQUFLRyxtQkFFTEgsS0FBS0ksT0FDREMsWUFBY0MsUUFBUyxLQUFNdEMsTUFBTyxNQUNwQ3VDLE9BQVNELFFBQVMsS0FBTXRDLE1BQU8sT0FTdkNxQixZQUFZVSxHQUNSLE9BQU8sSUFBSUQsRUFBbUJDLEdBT2xDVixXQUFXbUIsR0FNUCxPQUxJUixLQUFLSSxNQUFNQyxXQUFXQyxVQUFZRSxJQUNsQ1IsS0FBS0ksTUFBTUMsV0FBV0MsUUFBVUUsRUFDaENSLEtBQUtJLE1BQU1DLFdBQVdyQyxNQUFRZ0MsS0FBS1osU0FBU29CLElBR3pDUixLQUFLSSxNQUFNQyxXQUFXckMsTUFPakNxQixNQUFNbUIsR0FNRixPQUxJUixLQUFLSSxNQUFNRyxNQUFNRCxVQUFZRSxJQUM3QlIsS0FBS0ksTUFBTUcsTUFBTUQsUUFBVUUsRUFDM0JSLEtBQUtJLE1BQU1HLE1BQU12QyxNQUFRZ0MsS0FBS1MsY0FBY0QsSUFHekNSLEtBQUtJLE1BQU1HLE1BQU12QyxNQUdwQnFCLGNBQ0pXLEtBQUtaLFNBQVdBLEVBQVNZLEtBQUtDLFNBQVNJLFdBR25DaEIsbUJBQ0pXLEtBQUtTLGNBQWdCckIsRUFBU1ksS0FBS0MsU0FBU00sT0EzRHBEakUsRUFBQXdELG9HQ3hCQSxNQUFBWSxFQUFBNUQsRUFBQSxHQUtBUixFQUFBcUUsd0JBU0l0QixZQUNJdUIsRUFDQUMsRUFBdUIsSUFFdkJiLEtBQUtjLE1BQVEsRUFDYmQsS0FBS1ksbUJBQXFCRixFQUFBWixtQkFBbUJpQixLQUFLSCxHQUNsRFosS0FBS2dCLGtCQUFrQkgsR0FNM0J4QixTQUNJLE9BQU9XLEtBQUtZLG1CQUFtQlAsV0FBV0wsS0FBS1EsU0FNbkRuQixtQkFBbUI0QixHQUNmLE1BQU1ILEVBQVFkLEtBQUtrQixlQUFpQmxCLEtBQUttQixTQUN6Q25CLEtBQUtvQixNQUFRcEIsS0FBS2EsYUFBZUMsRUFFakMsSUFBSyxJQUFJbkUsRUFBSSxFQUFHQSxFQUFJc0UsRUFBUUksT0FBUTFFLElBQ2hDc0UsRUFBUXRFLElBQU1xRCxLQUFLc0IsS0FBSzNFLEdBQUtxRCxLQUFLb0IsTUFRMUMvQixrQkFBa0I0QixFQUF1Qk0sRUFBWSxHQUNqRHZCLEtBQUtRLFFBQVUsRUFFZixJQUFLLElBQUk3RCxFQUFJLEVBQUdBLEVBQUlzRSxFQUFRSSxPQUFRMUUsSUFDaENxRCxLQUFLUSxTQUFXUixLQUFLc0IsS0FBSzNFLEdBQUtzRSxFQUFRdEUsR0FLM0MsT0FGQXFELEtBQUtRLFNBQVdlLEVBRVR2QixLQUdYWCxpQkFHSSxPQUZBVyxLQUFLYyxNQUFRZCxLQUFLa0IsZUFBaUJsQixLQUFLbUIsU0FFakNuQixLQUdYWCxRQUFRaUMsR0FDSixPQUFhLE9BQVRBLEVBQ090QixNQUdYQSxLQUFLc0IsS0FBT0EsRUFBS0UsUUFFVnhCLE1BR1hYLGtCQUFrQm9DLEdBR2QsT0FGQXpCLEtBQUtrQixlQUFpQk8sRUFFZnpCLEtBR1hYLGtCQUFrQnFDLEdBR2QsT0FGQTFCLEtBQUthLGFBQWVhLEVBRWIxQixzRkNsRmYsTUFBQTJCLEVBQUE3RSxFQUFBLEdBRU04RSxFQUF1QixJQUU3QnRGLEVBQUF1RixpQkFXSXhDLFlBQ0l1QixFQUNBeEIsRUFBVyxVQUVYWSxLQUFLOEIsY0FBZ0IsRUFDckI5QixLQUFLK0IsVUFBVyxFQUNoQi9CLEtBQUtpQixRQUFVLEtBQ2ZqQixLQUFLZ0MsU0FBVzVDLEVBRWhCWSxLQUFLaUMsa0JBQW9CLElBQUlOLEVBQUFoQixrQkFBa0JDLEdBQy9DWixLQUFLa0MsYUFHVDdDLFFBQVFpQyxFQUFvQkgsR0FHeEIsT0FGQW5CLEtBQUtrQyxVQUFVQyxNQUFNYixFQUFNSCxJQUVwQm5CLEtBR1hYLFFBQ1NXLEtBQUtpQixTQUNOakIsS0FBS29DLGdCQUdUcEMsS0FBSytCLFVBQVcsRUFFaEIsSUFBSyxJQUFJcEYsRUFBSSxFQUFHQSxFQUFJcUQsS0FBS2tDLFVBQVViLE9BQVExRSxJQUN2Q3FELEtBQUtpQyxrQkFDQUksUUFBUXJDLEtBQUtrQyxVQUFVdkYsR0FBRyxJQUMxQjJGLGtCQUFrQnRDLEtBQUtrQyxVQUFVdkYsR0FBRyxJQUNwQzRGLGtCQUFrQnZDLEtBQUtpQixRQUFTakIsS0FBS3VCLFdBQ3JDaUIsaUJBRWdDLElBQWpDeEMsS0FBS2lDLGtCQUFrQm5CLFFBQ3ZCZCxLQUFLaUMsa0JBQWtCUSxtQkFBbUJ6QyxLQUFLaUIsU0FDL0NqQixLQUFLdUIsV0FBYXZCLEtBQUtpQyxrQkFBa0JiLE1BRXpDcEIsS0FBSytCLFVBQVcsRUFDaEIvQixLQUFLZ0MsWUFJYixHQUFJaEMsS0FBSytCLFNBQVUsQ0FHZixHQUZBL0IsS0FBSzhCLGdCQUVEOUIsS0FBSzhCLGVBQWlCRixFQUd0QixNQUZBNUIsS0FBSzhCLGNBQWdCLEVBRWZZLE1BQU0sK0JBR2hCLE9BQU8xQyxLQUFLMkMsUUFLaEIsT0FGQTNDLEtBQUs4QixjQUFnQixFQUVkOUIsS0FHWFgsUUFBUWlDLEdBQ0osT0FBT3RCLEtBQUtpQyxrQkFDUEksUUFBUWYsR0FDUmlCLGtCQUFrQnZDLEtBQUtpQixRQUFTakIsS0FBS3VCLFdBQ3JDSixTQUdUOUIsV0FBVzRCLEdBR1AsT0FGQWpCLEtBQUtpQixRQUFVQSxFQUVSakIsS0FHRFgsZUFDTixNQUFNdUQsR0FBc0IsR0FDdEJDLEVBRGdDLElBQ0ZELEVBQ3BDLElBQUlFLEVBQVMsRUFFYixNQUFRQSxHQUNKQSxFQUFTQyxZQUNKQyxLQUFLQyxTQUFXSixFQUFZRCxHQUFpQk0sUUFBUSxJQUk5RCxPQUFPSixFQUdEekQsY0FBYzhELEVBQW1CLE1BQ2xDQSxJQUNEQSxFQUFXbkQsS0FBS2tDLFVBQVUsR0FBRyxHQUFHYixRQUdwQyxNQUFNSixFQUFVLElBQUltQyxhQUFhRCxHQUVqQyxJQUFLLElBQUl4RyxFQUFJLEVBQUdBLEVBQUl3RyxFQUFVeEcsSUFDMUJzRSxFQUFRdEUsR0FBS3FELEtBQUtxRCxlQVF0QixPQUxBckQsS0FBS3NELFdBQVdyQyxHQUNoQmpCLEtBQUt1QixVQUFZdkIsS0FBS3FELGVBRXRCckQsS0FBS2dDLFdBRUVoQyxzRkN0SGYsTUFBQVUsRUFBQTVELEVBQUEsR0FDQXlHLEVBQUF6RyxFQUFBLEdBRUFSLEVBQUFrSCxxQkFBNEJELEVBQUExQixXQVd4QnhDLFlBQ0l1QixFQUE2Q0YsRUFBQXZCLHVCQUF1Qk8sV0FFcEUrRCxNQUFNN0MsR0FFTlosS0FBS2MsTUFBUSxFQUNiZCxLQUFLMEQsaUJBQ0wxRCxLQUFLMkQsZ0JBR1R0RSxRQVdJLE9BVkFXLEtBQUs0RCxZQUFjNUQsS0FBS2lDLGtCQUFrQlgsS0FFckN0QixLQUFLaUIsVUFDTmpCLEtBQUtvQyxjQUFjcEMsS0FBSzRELFlBQVl2QyxRQUNwQ3JCLEtBQUs2RCxpQkFBaUI3RCxLQUFLaUIsUUFBUU8sVUFHdkN4QixLQUFLaUMsa0JBQWtCTSxrQkFBa0J2QyxLQUFLaUIsUUFBU2pCLEtBQUt1QixXQUM1RHZCLEtBQUtRLFFBQVVSLEtBQUtpQyxrQkFBa0J6QixRQUUvQlIsS0FNWFgsa0JBQ0ksSUFBSyxJQUFJeUUsRUFBUSxFQUFHQSxFQUFROUQsS0FBSzJELGFBQWF0QyxPQUFReUMsSUFDbEQ5RCxLQUFLMkQsYUFBYUcsR0FBT0MscUJBQXFCRCxHQUc5QzlELEtBQUsyRCxhQUFhdEMsT0FBUyxHQUMzQnJCLEtBQUsyRCxhQUFhLEdBQUdLLGtCQUk3QjNFLHFCQUNJLE1BQU0rQixFQUFRcEIsS0FBS2lDLGtCQUFrQnBCLGFBQWViLEtBQUtjLE1BRXpELElBQUltRCxFQUF1QixFQUUzQixJQUFLLElBQUl0SCxFQUFJLEVBQUdBLEVBQUlxRCxLQUFLaUIsUUFBUUksT0FBUTFFLElBQ1QsSUFBeEJxRCxLQUFLNEQsWUFBWWpILEtBSXJCc0gsRUFSbUIsS0FTR2pFLEtBQUtpQixRQUFRdEUsR0FBS3FELEtBQUtrRSxjQUFjdkgsSUFFM0RxRCxLQUFLa0UsY0FBY3ZILEdBQUtxRCxLQUFLaUIsUUFBUXRFLEdBQ3JDcUQsS0FBS2lCLFFBQVF0RSxJQUFNcUQsS0FBSzRELFlBQVlqSCxHQUFLeUUsRUFBUTZDLEdBR3JEakUsS0FBS3VCLFdBQWFILEVBR3RCL0IsU0FDSSxPQUFPVyxLQUFLaUMsa0JBQWtCckIsbUJBQW1CUCxXQUM3Q0wsS0FBS1EsU0FJYm5CLFVBSUksT0FIQVcsS0FBS2lDLGtCQUFrQk0sa0JBQWtCdkMsS0FBS2lCLFFBQVNqQixLQUFLdUIsV0FDNUR2QixLQUFLUSxRQUFVUixLQUFLaUMsa0JBQWtCekIsUUFFL0JSLEtBQUttQixTQUdoQjlCLHVCQUF1QjZCLEdBQ25CLE1BQU1KLEVBQVFJLEVBQWlCbEIsS0FBS21CLFNBRXBDbkIsS0FBS21FLHdCQUF3QnJELEdBR2pDekIscUJBQXFCK0UsR0FDakIsSUFBSUMsRUFBVyxFQUVmLElBQUssSUFBSVAsRUFBUSxFQUFHQSxFQUFROUQsS0FBSzBELGNBQWNyQyxPQUFReUMsSUFBUyxDQUM1RCxNQUFNUSxFQUFTdEUsS0FBSzBELGNBQWNJLEdBQ2xDTyxHQUFZQyxFQUFPckQsUUFBUW1ELEdBQWVFLEVBQU94RCxNQUtyRCxPQUZBZCxLQUFLbUUsd0JBQXdCRSxHQUV0QnJFLEtBR1hYLHdCQUF3QmtGLEdBR3BCLE9BRkF2RSxLQUFLYyxNQUFReUQsRUFBY3ZFLEtBQUtPLFFBRXpCUCxLQU1YWCxRQUNJLE9BQU9XLEtBQUtpQyxrQkFBa0JyQixtQkFBbUJMLE1BQU1QLEtBQUtRLFNBT2hFbkIsaUJBQWlCNkUsR0FHYixPQUZBbEUsS0FBS2tFLGNBQWdCQSxFQUVkbEUsS0FNWFgsYUFBYWtDLEVBQW9CdkIsS0FBS3FELGdCQUdsQyxPQUZBckQsS0FBS3VCLFVBQVlBLEVBRVZ2QixzRkNwSWYsTUFBQVUsRUFBQTVELEVBQUEsR0FDQTBILEVBQUExSCxFQUFBLEdBQ0E2RSxFQUFBN0UsRUFBQSxHQUVBUixFQUFBbUksWUFNSXBGLFlBQ0l1QixFQUE2Q0YsRUFBQXZCLHVCQUF1Qk8sVUFDcEVtQixHQUVBYixLQUFLMEUsVUFDTDFFLEtBQUtZLG1CQUFxQkEsRUFDMUJaLEtBQUtpQyxrQkFBb0IsSUFBSU4sRUFBQWhCLGtCQUN6QlgsS0FBS1ksbUJBQ0xDLEdBUVJ4QixJQUFJc0YsR0FDQSxNQUFNQyxFQUFRNUUsS0FBSzNCLE9BQU9zRyxHQUNwQkUsRUFBZ0I3RSxLQUFLMEUsT0FBT3ZDLEtBQUt5QyxHQUFTLEVBQzFDRSxFQUFjOUUsS0FBSzBFLE9BQU9HLEVBQWdCLEdBRWhELFlBQW9CRSxJQUFoQkQsRUFDTzlFLE1BSVg0RSxFQUFNSSxRQUFTVixJQUNYQSxFQUFPWCxhQUFlbUIsSUFJMUJBLEVBQVlFLFFBQVNWLElBQ2pCQSxFQUFPWixjQUFnQmtCLElBR3BCNUUsTUFHWFgsUUFBUUQsR0FDSixJQUFLLElBQUk2RixFQUFNLEVBQUdBLEVBQU1qRixLQUFLMEUsT0FBT3JELE9BQVE0RCxJQUN4QzdGLEVBQVNZLEtBQUswRSxPQUFPTyxHQUFNQSxHQVFuQzVGLElBQUl5RSxHQUNBLE9BQU85RCxLQUFLMEUsT0FBT1osR0FNdkJ6RSxVQUNJLE9BQU9XLEtBQUtwQyxJQUFJb0MsS0FBSzBFLE9BQU9yRCxPQUFTLEdBUWpDaEMsT0FBT3NGLEdBQ1gsTUFBTUMsS0FFTixJQUFLLElBQUlqSSxFQUFJLEVBQUdBLEVBQUlnSSxFQUFlaEksSUFDL0JpSSxFQUFNakksR0FBSyxJQUFJNkgsRUFBQWhCLE9BQU94RCxLQUFLWSxvQkFDM0JnRSxFQUFNakksR0FBR3NGLGtCQUFvQmpDLEtBQUtpQyxrQkFHdEMsT0FBTzJDLG1GQ2xGZixNQUFBbEUsRUFBQTVELEVBQUEsR0FDQW9JLEVBQUFwSSxFQUFBLEdBZ0JBUixFQUFBNkksc0JBU0k5RixZQUNJK0YsR0FDSUMsT0FBUSxJQUNSekUsbUJBQW9CRixFQUFBdkIsdUJBQXVCTyxVQUMzQ21CLGFBQWMsS0FHbEJiLEtBQUtjLE1BQVEsRUFDYmQsS0FBS1ksbUJBQXFCd0UsRUFBT3hFLG1CQUNqQ1osS0FBSzBFLE9BQVMsSUFBSVEsRUFBQVQsTUFBTXpFLEtBQUtZLG1CQUFvQndFLEVBQU92RSxjQUN4RGIsS0FBS3FGLE9BQVNELEVBQU9DLE9BR3pCaEcsTUFBTWlHLEdBQ0Z0RixLQUFLdUYseUJBQXlCRCxHQUU5QnRGLEtBQUt3RixTQUFTRixHQUNkLElBQUlHLEVBQWdCLEVBRXBCLEtBQU9BLEdBQWlCekYsS0FBS3FGLFVBQ3pCSSxFQUVvQixLQUFTLEdBQ3pCQyxRQUFRQyxJQUFJM0YsS0FBS2MsTUFBTzJFLEdBTzVCekYsS0FBS3dGLFNBQVNGLEdBR2xCLE9BQU90RixLQUdYWCxRQUFRaUMsR0FDSixJQUFJc0UsS0FpQkosT0FoQkF0RSxFQUFPLElBQUk4QixhQUFhOUIsR0FFeEJ0QixLQUFLMEUsT0FBT00sUUFBU0osSUFDYmdCLEVBQVF2RSxPQUFTLElBQ2pCQyxFQUFPLElBQUk4QixhQUFhd0MsR0FDeEJBLE1BR0o1RixLQUFLMEUsT0FBT3pDLGtCQUFrQkksUUFBUWYsR0FFdEMsSUFBSyxJQUFJd0MsRUFBUSxFQUFHQSxFQUFRYyxFQUFNdkQsT0FBUXlDLElBQVMsQ0FDL0MsTUFBTVEsRUFBU00sRUFBTWQsR0FDckI4QixFQUFROUIsR0FBU1EsRUFBT3VCLGFBSXpCRCxFQUdYdkcsU0FBU3NGLEdBR0wsT0FGQTNFLEtBQUswRSxPQUFPb0IsSUFBSW5CLEdBRVQzRSxLQU9YWCxZQUFZMEcsR0FjUixPQWJBQSxFQUFNckIsT0FBT00sUUFBUUosSUFDakI1RSxLQUFLZ0csU0FBU3BCLEtBR2xCbUIsRUFBTTlFLFFBQVErRCxRQUFRLENBQUNpQixFQUFjbkMsS0FDakM5RCxLQUFLMEUsT0FBTzlHLElBQUlrRyxHQUFPa0IsUUFBUSxDQUFDVixFQUFnQkYsS0FDNUNFLEVBQ0toQixXQUFXLElBQUlGLGFBQWE2QyxFQUFhN0IsS0FDekNQLGlCQUFpQlMsRUFBT3JELFFBQVFPLFNBQ2hDMEUsYUFBYUgsRUFBTUksV0FBV3JDLEdBQU9NLFFBSTNDcEUsS0FNWFgsY0FDSSxJQUFJMEcsR0FDQXJCLFVBQ0F5QixjQUNBbEYsWUFrQkosT0FmQWpCLEtBQUswRSxPQUFPTSxRQUFRSixJQUNoQm1CLEVBQU1yQixPQUFPdkMsS0FBS3lDLEVBQU12RCxRQUV4QixNQUFNK0UsRUFBdUJMLEVBQU1JLFdBQVdoRSxTQUN4Q2tFLEVBQW9CTixFQUFNOUUsUUFBUWtCLFNBRXhDLElBQUltRSxFQUFrQlAsRUFBTUksV0FBV0MsRUFBdUIsR0FDMURILEVBQWVGLEVBQU05RSxRQUFRb0YsRUFBb0IsR0FFckR6QixFQUFNSSxRQUFRVixJQUNWMkIsRUFBYTlELEtBQUtvRSxNQUFNQyxLQUFLbEMsRUFBT3JELFVBQ3BDcUYsRUFBZ0JuRSxLQUFLbUMsRUFBTy9DLGVBSTdCd0UsRUFNWDFHLHlCQUF5QmlHLEdBQ3JCLElBQUssSUFBSXhCLEVBQVEsRUFBR0EsRUFBUXdCLEVBQVFqRSxPQUFReUMsSUFBUyxDQUNqRCxNQUFNeEMsRUFBT2dFLEVBQVF4QixHQUNyQnhDLEVBQUttRixNQUFRLElBQUlyRCxhQUFhOUIsRUFBS21GLFFBUW5DcEgsU0FBU2lHLEdBQ2IsSUFBSyxJQUFJb0IsRUFBVSxFQUFHQSxFQUFVcEIsRUFBUWpFLE9BQVFxRixJQUFXLENBQ3ZELE1BQU1wRixFQUFPZ0UsRUFBUW9CLEdBRXJCMUcsS0FBSzJHLG1CQUFtQnJGLEdBQ3hCdEIsS0FBS2dFLGdCQUFnQjFDLEVBQUtILFFBRTFCbkIsS0FBSzBFLE9BQU9NLFFBQVFKLElBQ2hCLElBQUssSUFBSWdDLEVBQVksRUFBR0EsRUFBWWhDLEVBQU12RCxPQUFRdUYsSUFDL0JoQyxFQUFNZ0MsR0FDZG5FLHdCQVdmcEQsb0JBQW1Cb0gsTUFBRUEsSUFDekIsSUFBSWIsS0FDQXRFLEVBQU8sSUFBSThCLGFBQWFxRCxHQWdCNUIsT0FkQXpHLEtBQUswRSxPQUFPTSxRQUFTSixJQUNiZ0IsRUFBUXZFLE9BQVMsSUFDakJDLEVBQU8sSUFBSThCLGFBQWF3QyxHQUN4QkEsTUFHSjVGLEtBQUswRSxPQUFPekMsa0JBQWtCSSxRQUFRZixHQUV0QyxJQUFLLElBQUl3QyxFQUFRLEVBQUdBLEVBQVFjLEVBQU12RCxPQUFReUMsSUFBUyxDQUMvQyxNQUFNUSxFQUFTTSxFQUFNZCxHQUNyQjhCLEVBQVE5QixHQUFTUSxFQUFPM0IsUUFBUXhCLFlBSWpDbkIsS0FPSFgsZ0JBQWdCOEIsR0FDcEIsTUFBTTBGLEVBQVk3RyxLQUFLMEUsT0FBT29DLFVBQzlCLElBQUlDLEVBQVksRUFFaEIsSUFBSyxJQUFJakQsRUFBUSxFQUFHQSxFQUFRK0MsRUFBVXhGLE9BQVF5QyxJQUFTLENBQ25ELE1BQU1RLEVBQVN1QyxFQUFVL0MsR0FFekJRLEVBQU8wQyx1QkFBdUI3RixHQUM5Qm1ELEVBQU9OLGtCQUVQK0MsR0FBYXpDLEVBQU94RCxNQUFRd0QsRUFBT3hELE1BR3ZDZCxLQUFLYyxNQUFRaUcsRUFBWSxtRkNuTmpDLFNBQWlCcEgsR0FDR0EsRUFBQVUsV0FBaEIsU0FBMkJHLEdBQ3ZCLE9BQU8sR0FBSyxFQUFJd0MsS0FBS2lFLElBQU16RyxJQUdmYixFQUFBWSxNQUFoQixTQUFzQkMsR0FDbEIsTUFBTTBHLEVBQUtsRSxLQUFLaUUsR0FBS3pHLEVBRXJCLE9BQU8wRyxHQUFNQSxFQUFLLElBQU0sR0FSaEMsQ0FBaUI1SyxFQUFBcUQsWUFBQXJELEVBQUFxRCw4RkNBakIsU0FBaUJGLEdBQ0dBLEVBQUFZLFdBQWhCLFNBQTJCRyxHQUN2QixPQUFPQSxHQUFXLEVBQUlBLEVBQVUsR0FGeEMsQ0FBaUJsRSxFQUFBbUQsT0FBQW5ELEVBQUFtRCx5RkNBakIsU0FBaUJJLEdBQ2IsU0FBQVEsRUFBMkJHLEdBQ3ZCLE9BQU93QyxLQUFLbUUsS0FBSzNHLEdBRExYLEVBQUFRLFdBQVVBLEVBSVZSLEVBQUFVLE1BQWhCLFNBQXNCQyxHQUNsQixNQUFNVyxFQUFTZCxFQUFXRyxHQUUxQixPQUFPLEVBQU1XLEVBQVNBLEdBUjlCLENBQWlCN0UsRUFBQXVELG9CQUFBdkQsRUFBQXVELHNHQ0FqQixTQUFpQk4sR0FDR0EsRUFBQWMsV0FBaEIsU0FBMkJHLEdBQ3ZCLE9BQU9BLEdBQVcsRUFBSSxFQUFJLEdBRmxDLENBQWlCbEUsRUFBQWlELFNBQUFqRCxFQUFBaUQsMkZDQWpCLE1BQUFnRSxFQUFBekcsRUFBQSxHQUdTUixFQUFBdUYsV0FIQTBCLEVBQUExQixXQUNULE1BQUF1RixFQUFBdEssRUFBQSxHQUVxQlIsRUFBQTZJLGdCQUZaaUMsRUFBQWpDIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSBmYWN0b3J5KCk7XG5cdFx0Zm9yKHZhciBpIGluIGEpICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBleHBvcnRzIDogcm9vdClbaV0gPSBhW2ldO1xuXHR9XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxMCk7XG4iLCJpbXBvcnQgeyBCaW5hcnkgfSBmcm9tICcuL2JpbmFyeS5mdW5jdGlvbic7XG5pbXBvcnQgeyBIeXBlcmJvbGljVGFuZ2VudCB9IGZyb20gJy4vaHlwZXJib2xpYy10YW5nZW50LmZ1bmN0aW9uJztcbmltcG9ydCB7IFJlTFUgfSBmcm9tICcuL3JlbHUuZnVuY3Rpb24nO1xuaW1wb3J0IHsgU2lnbW9pZGFsIH0gZnJvbSAnLi9zaWdtb2lkYWwuZnVuY3Rpb24nO1xuXG5kZWNsYXJlIHR5cGUgQ2FjaGVUeXBlID0ge1xuICAgIGFjdGl2YXRpb246IHsgc3lwbmFzZTogbnVtYmVyOyB2YWx1ZTogbnVtYmVyIH07XG4gICAgcHJpbWU6IHsgc3lwbmFzZTogbnVtYmVyOyB2YWx1ZTogbnVtYmVyIH07XG59O1xuXG5leHBvcnQgZW51bSBBY3RpdmF0aW9uRnVuY3Rpb25UeXBlIHtcbiAgICBCSU5BUlkgPSAnQklOQVJZJyxcbiAgICBSRUxVID0gJ1JFTFUnLFxuICAgIFNJR01PSURBTCA9ICdTSUdNT0lEQUwnLFxuICAgIEhZUEVSQk9MSUNfVEFOR0VOVCA9ICdIWVBFUkJPTElDX1RBTkdFTlQnXG59XG5cbmNvbnN0IGNhbGxiYWNrID0ge1xuICAgIFtBY3RpdmF0aW9uRnVuY3Rpb25UeXBlLkJJTkFSWV06IEJpbmFyeSxcbiAgICBbQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZS5SRUxVXTogUmVMVSxcbiAgICBbQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZS5TSUdNT0lEQUxdOiBTaWdtb2lkYWwsXG4gICAgW0FjdGl2YXRpb25GdW5jdGlvblR5cGUuSFlQRVJCT0xJQ19UQU5HRU5UXTogSHlwZXJib2xpY1RhbmdlbnRcbn07XG5cbmV4cG9ydCBjbGFzcyBBY3RpdmF0aW9uRnVuY3Rpb24ge1xuICAgIHByb3RlY3RlZCBkZWZhdWx0OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBjYWxsYmFjazogRnVuY3Rpb247XG4gICAgcHJpdmF0ZSBjYWxsYmFja1ByaW1lOiBGdW5jdGlvbjtcbiAgICBwcml2YXRlIGNhY2hlOiBDYWNoZVR5cGU7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgZnVuY3Rpb25OYW1lOiBBY3RpdmF0aW9uRnVuY3Rpb25UeXBlID0gQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZS5CSU5BUllcbiAgICApIHtcbiAgICAgICAgdGhpcy5kZWZhdWx0ID0gZnVuY3Rpb25OYW1lO1xuICAgICAgICB0aGlzLnNldENhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMuc2V0Q2FsbGJhY2tQcmltZSgpO1xuXG4gICAgICAgIHRoaXMuY2FjaGUgPSB7XG4gICAgICAgICAgICBhY3RpdmF0aW9uOiB7IHN5cG5hc2U6IG51bGwsIHZhbHVlOiBudWxsIH0sXG4gICAgICAgICAgICBwcmltZTogeyBzeXBuYXNlOiBudWxsLCB2YWx1ZTogbnVsbCB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmdW5jdGlvbk5hbWVcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHN0YXRpYyBpbml0KGZ1bmN0aW9uTmFtZTogQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZSkge1xuICAgICAgICByZXR1cm4gbmV3IEFjdGl2YXRpb25GdW5jdGlvbihmdW5jdGlvbk5hbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzeW5hcHNlXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBhY3RpdmF0aW9uKHN5bmFwc2U6IG51bWJlcikge1xuICAgICAgICBpZiAodGhpcy5jYWNoZS5hY3RpdmF0aW9uLnN5cG5hc2UgIT09IHN5bmFwc2UpIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUuYWN0aXZhdGlvbi5zeXBuYXNlID0gc3luYXBzZTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUuYWN0aXZhdGlvbi52YWx1ZSA9IHRoaXMuY2FsbGJhY2soc3luYXBzZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZS5hY3RpdmF0aW9uLnZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzeW5hcHNlXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBwcmltZShzeW5hcHNlOiBudW1iZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FjaGUucHJpbWUuc3lwbmFzZSAhPT0gc3luYXBzZSkge1xuICAgICAgICAgICAgdGhpcy5jYWNoZS5wcmltZS5zeXBuYXNlID0gc3luYXBzZTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUucHJpbWUudmFsdWUgPSB0aGlzLmNhbGxiYWNrUHJpbWUoc3luYXBzZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZS5wcmltZS52YWx1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldENhbGxiYWNrKCkge1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2tbdGhpcy5kZWZhdWx0XS5hY3RpdmF0aW9uO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0Q2FsbGJhY2tQcmltZSgpIHtcbiAgICAgICAgdGhpcy5jYWxsYmFja1ByaW1lID0gY2FsbGJhY2tbdGhpcy5kZWZhdWx0XS5wcmltZTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIEFjdGl2YXRpb25GdW5jdGlvbixcbiAgICBBY3RpdmF0aW9uRnVuY3Rpb25UeXBlXG59IGZyb20gJy4vYWN0aXZhdGlvbi1mdW5jdGlvbnMvYWN0aXZhdGlvbi1mdW5jdGlvbic7XG5cbmV4cG9ydCBjbGFzcyBTeW5hcHRpY1Byb2Nlc3NvciB7XG4gICAgYWN0aXZhdGlvbkZ1bmN0aW9uOiBBY3RpdmF0aW9uRnVuY3Rpb247XG4gICAgZXJyb3I6IG51bWJlcjtcbiAgICBzeW5hcHNlOiBudW1iZXI7XG4gICAgZGF0YTogRmxvYXQ2NEFycmF5O1xuICAgIGxlYXJuaW5nUmF0ZTogbnVtYmVyO1xuICAgIGRlbHRhOiBudW1iZXI7XG4gICAgb3V0cHV0RXhwZWN0ZWQ6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBhY3RpdmF0aW9uRnVuY3Rpb246IEFjdGl2YXRpb25GdW5jdGlvblR5cGUsXG4gICAgICAgIGxlYXJuaW5nUmF0ZTogbnVtYmVyID0gMC4zXG4gICAgKSB7XG4gICAgICAgIHRoaXMuZXJyb3IgPSAwO1xuICAgICAgICB0aGlzLmFjdGl2YXRpb25GdW5jdGlvbiA9IEFjdGl2YXRpb25GdW5jdGlvbi5pbml0KGFjdGl2YXRpb25GdW5jdGlvbik7XG4gICAgICAgIHRoaXMuc2V0TGVhcm5pbmdGYWN0b3IobGVhcm5pbmdSYXRlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqL1xuICAgIG91dHB1dCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmF0aW9uRnVuY3Rpb24uYWN0aXZhdGlvbih0aGlzLnN5bmFwc2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RmxvYXQ2NEFycmF5fSB3ZWlnaHRzXG4gICAgICovXG4gICAgcmVjYWxjdWxhdGVXZWlnaHRzKHdlaWdodHM6IEZsb2F0NjRBcnJheSkge1xuICAgICAgICBjb25zdCBlcnJvciA9IHRoaXMub3V0cHV0RXhwZWN0ZWQgLSB0aGlzLm91dHB1dCgpO1xuICAgICAgICB0aGlzLmRlbHRhID0gdGhpcy5sZWFybmluZ1JhdGUgKiBlcnJvcjtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdlaWdodHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHdlaWdodHNbaV0gKz0gdGhpcy5kYXRhW2ldICogdGhpcy5kZWx0YTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RmxvYXQ2NEFycmF5fSB3ZWlnaHRzXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBjYWxjdWxhdGVTeW5hcHNlcyh3ZWlnaHRzOiBGbG9hdDY0QXJyYXksIHRocmVzaG9sZCA9IDApIHtcbiAgICAgICAgdGhpcy5zeW5hcHNlID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdlaWdodHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuc3luYXBzZSArPSB0aGlzLmRhdGFbaV0gKiB3ZWlnaHRzW2ldO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zeW5hcHNlICs9IHRocmVzaG9sZDtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjYWxjdWxhdGVFcnJvcigpIHtcbiAgICAgICAgdGhpcy5lcnJvciA9IHRoaXMub3V0cHV0RXhwZWN0ZWQgLSB0aGlzLm91dHB1dCgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHNldERhdGEoZGF0YTogRmxvYXQ2NEFycmF5KSB7XG4gICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGEuc2xpY2UoKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBzZXRPdXRwdXRFeHBlY3RlZChleHBlY3RlZE91dHB1dCkge1xuICAgICAgICB0aGlzLm91dHB1dEV4cGVjdGVkID0gZXhwZWN0ZWRPdXRwdXQ7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgc2V0TGVhcm5pbmdGYWN0b3IobGVhcm5pbmdGYWN0b3IpIHtcbiAgICAgICAgdGhpcy5sZWFybmluZ1JhdGUgPSBsZWFybmluZ0ZhY3RvcjtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBBY3RpdmF0aW9uRnVuY3Rpb25UeXBlIH0gZnJvbSAnLi9hY3RpdmF0aW9uLWZ1bmN0aW9ucy9hY3RpdmF0aW9uLWZ1bmN0aW9uJztcbmltcG9ydCB7IFN5bmFwdGljUHJvY2Vzc29yIH0gZnJvbSAnLi9zeW5hcHRpYy1wcm9jZXNzb3InO1xuXG5jb25zdCBMSU1JVF9FUlJPUlM6IG51bWJlciA9IDgwMDA7XG5cbmV4cG9ydCBjbGFzcyBQZXJjZXB0cm9uIHtcbiAgICBkYXRhU3RhY2s6IGFueVtdO1xuICAgIHdlaWdodHM6IEZsb2F0NjRBcnJheTtcbiAgICB0aHJlc2hvbGQ6IG51bWJlcjtcbiAgICBjb3VudGVyRXJyb3JzOiBudW1iZXI7XG4gICAgaGFzRXJyb3I6IGJvb2xlYW47XG5cbiAgICBzeW5hcHRpY1Byb2Nlc3NvcjogU3luYXB0aWNQcm9jZXNzb3I7XG5cbiAgICBmdW5jQmFjazogKCkgPT4gdm9pZDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBhY3RpdmF0aW9uRnVuY3Rpb24/OiBBY3RpdmF0aW9uRnVuY3Rpb25UeXBlLFxuICAgICAgICBjYWxsYmFjayA9ICgpID0+IHt9XG4gICAgKSB7XG4gICAgICAgIHRoaXMuY291bnRlckVycm9ycyA9IDA7XG4gICAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgdGhpcy53ZWlnaHRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5mdW5jQmFjayA9IGNhbGxiYWNrO1xuXG4gICAgICAgIHRoaXMuc3luYXB0aWNQcm9jZXNzb3IgPSBuZXcgU3luYXB0aWNQcm9jZXNzb3IoYWN0aXZhdGlvbkZ1bmN0aW9uKTtcbiAgICAgICAgdGhpcy5kYXRhU3RhY2sgPSBbXTtcbiAgICB9XG5cbiAgICBhZGREYXRhKGRhdGE6IEZsb2F0NjRBcnJheSwgb3V0cHV0OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5kYXRhU3RhY2sucHVzaChbZGF0YSwgb3V0cHV0XSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgbGVhcm4oKSB7XG4gICAgICAgIGlmICghdGhpcy53ZWlnaHRzKSB7XG4gICAgICAgICAgICB0aGlzLmFzc2lnbldlaWdodHMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGF0YVN0YWNrLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnN5bmFwdGljUHJvY2Vzc29yXG4gICAgICAgICAgICAgICAgLnNldERhdGEodGhpcy5kYXRhU3RhY2tbaV1bMF0pXG4gICAgICAgICAgICAgICAgLnNldE91dHB1dEV4cGVjdGVkKHRoaXMuZGF0YVN0YWNrW2ldWzFdKVxuICAgICAgICAgICAgICAgIC5jYWxjdWxhdGVTeW5hcHNlcyh0aGlzLndlaWdodHMsIHRoaXMudGhyZXNob2xkKVxuICAgICAgICAgICAgICAgIC5jYWxjdWxhdGVFcnJvcigpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zeW5hcHRpY1Byb2Nlc3Nvci5lcnJvciAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3luYXB0aWNQcm9jZXNzb3IucmVjYWxjdWxhdGVXZWlnaHRzKHRoaXMud2VpZ2h0cyk7XG4gICAgICAgICAgICAgICAgdGhpcy50aHJlc2hvbGQgKz0gdGhpcy5zeW5hcHRpY1Byb2Nlc3Nvci5kZWx0YTtcblxuICAgICAgICAgICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZnVuY0JhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmNvdW50ZXJFcnJvcnMrKztcblxuICAgICAgICAgICAgaWYgKHRoaXMuY291bnRlckVycm9ycyA+PSBMSU1JVF9FUlJPUlMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ZXJFcnJvcnMgPSAwO1xuXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ01heGltdW0gZXJyb3IgbGltaXQgcmVhY2hlZCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWFybigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb3VudGVyRXJyb3JzID0gMDtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwcm9jZXNzKGRhdGE6IEZsb2F0NjRBcnJheSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zeW5hcHRpY1Byb2Nlc3NvclxuICAgICAgICAgICAgLnNldERhdGEoZGF0YSlcbiAgICAgICAgICAgIC5jYWxjdWxhdGVTeW5hcHNlcyh0aGlzLndlaWdodHMsIHRoaXMudGhyZXNob2xkKVxuICAgICAgICAgICAgLm91dHB1dCgpO1xuICAgIH1cblxuICAgIHNldFdlaWdodHMod2VpZ2h0czogRmxvYXQ2NEFycmF5KSB7XG4gICAgICAgIHRoaXMud2VpZ2h0cyA9IHdlaWdodHM7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGNyZWF0ZVdlaWdodCgpIHtcbiAgICAgICAgY29uc3QgcmFuZ2VXZWlnaHQgPSB7IE1JTjogLTAuNSwgTUFYOiAwLjQ5IH07XG4gICAgICAgIGNvbnN0IHJhbmdlRGlmZiA9IHJhbmdlV2VpZ2h0Lk1BWCAtIHJhbmdlV2VpZ2h0Lk1JTjtcbiAgICAgICAgbGV0IHdlaWdodCA9IDA7XG5cbiAgICAgICAgd2hpbGUgKCF3ZWlnaHQpIHtcbiAgICAgICAgICAgIHdlaWdodCA9IHBhcnNlRmxvYXQoXG4gICAgICAgICAgICAgICAgKE1hdGgucmFuZG9tKCkgKiByYW5nZURpZmYgKyByYW5nZVdlaWdodC5NSU4pLnRvRml4ZWQoNClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gd2VpZ2h0O1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhc3NpZ25XZWlnaHRzKGRhdGFTaXplOiBudW1iZXIgPSBudWxsKSB7XG4gICAgICAgIGlmICghZGF0YVNpemUpIHtcbiAgICAgICAgICAgIGRhdGFTaXplID0gdGhpcy5kYXRhU3RhY2tbMF1bMF0ubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgd2VpZ2h0cyA9IG5ldyBGbG9hdDY0QXJyYXkoZGF0YVNpemUpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YVNpemU7IGkrKykge1xuICAgICAgICAgICAgd2VpZ2h0c1tpXSA9IHRoaXMuY3JlYXRlV2VpZ2h0KCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFdlaWdodHMod2VpZ2h0cyk7XG4gICAgICAgIHRoaXMudGhyZXNob2xkID0gdGhpcy5jcmVhdGVXZWlnaHQoKTtcblxuICAgICAgICB0aGlzLmZ1bmNCYWNrKCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZSB9IGZyb20gJy4vYWN0aXZhdGlvbi1mdW5jdGlvbnMvYWN0aXZhdGlvbi1mdW5jdGlvbic7XG5pbXBvcnQgeyBQZXJjZXB0cm9uIH0gZnJvbSAnLi9wZXJjZXB0cm9uJztcblxuZXhwb3J0IGNsYXNzIE5ldXJvbiBleHRlbmRzIFBlcmNlcHRyb24ge1xuICAgIGJlZm9yZVdlaWdodHM6IEZsb2F0NjRBcnJheTtcbiAgICBlcnJvcjogbnVtYmVyO1xuICAgIGlucHV0TmV1cm9uczogTmV1cm9uW107XG4gICAgb3V0cHV0TmV1cm9uczogTmV1cm9uW107XG4gICAgc3luYXBzZTogbnVtYmVyO1xuICAgIGN1cnJlbnREYXRhOiBGbG9hdDY0QXJyYXk7XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RydXRvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBhY3RpdmF0aW9uRnVuY3Rpb246IEFjdGl2YXRpb25GdW5jdGlvblR5cGUgPSBBY3RpdmF0aW9uRnVuY3Rpb25UeXBlLlNJR01PSURBTFxuICAgICkge1xuICAgICAgICBzdXBlcihhY3RpdmF0aW9uRnVuY3Rpb24pO1xuXG4gICAgICAgIHRoaXMuZXJyb3IgPSAwO1xuICAgICAgICB0aGlzLm91dHB1dE5ldXJvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5pbnB1dE5ldXJvbnMgPSBbXTtcbiAgICB9XG5cbiAgICBsZWFybigpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50RGF0YSA9IHRoaXMuc3luYXB0aWNQcm9jZXNzb3IuZGF0YTtcblxuICAgICAgICBpZiAoIXRoaXMud2VpZ2h0cykge1xuICAgICAgICAgICAgdGhpcy5hc3NpZ25XZWlnaHRzKHRoaXMuY3VycmVudERhdGEubGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0QmVmb3JlV2VpZ2h0cyh0aGlzLndlaWdodHMuc2xpY2UoKSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN5bmFwdGljUHJvY2Vzc29yLmNhbGN1bGF0ZVN5bmFwc2VzKHRoaXMud2VpZ2h0cywgdGhpcy50aHJlc2hvbGQpO1xuICAgICAgICB0aGlzLnN5bmFwc2UgPSB0aGlzLnN5bmFwdGljUHJvY2Vzc29yLnN5bmFwc2U7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXJyb3Igb24gaGlkZGVuIGxheWVyc1xuICAgICAqL1xuICAgIGJhY2twcm9wYWdhdGlvbigpIHtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuaW5wdXROZXVyb25zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgdGhpcy5pbnB1dE5ldXJvbnNbaW5kZXhdLmNhbGN1bGF0ZUhpZGRlbkVycm9yKGluZGV4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmlucHV0TmV1cm9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmlucHV0TmV1cm9uc1swXS5iYWNrcHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlY2FsY3VsYXRlV2VpZ2h0cygpIHtcbiAgICAgICAgY29uc3QgZGVsdGEgPSB0aGlzLnN5bmFwdGljUHJvY2Vzc29yLmxlYXJuaW5nUmF0ZSAqIHRoaXMuZXJyb3I7XG4gICAgICAgIGNvbnN0IG1vbWVudHVtRmFjdG9yID0gMC43NztcbiAgICAgICAgbGV0IGRlbHRhV2VpZ2h0czogbnVtYmVyID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud2VpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudERhdGFbaV0gPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGVsdGFXZWlnaHRzID1cbiAgICAgICAgICAgICAgICBtb21lbnR1bUZhY3RvciAqICh0aGlzLndlaWdodHNbaV0gLSB0aGlzLmJlZm9yZVdlaWdodHNbaV0pO1xuXG4gICAgICAgICAgICB0aGlzLmJlZm9yZVdlaWdodHNbaV0gPSB0aGlzLndlaWdodHNbaV07XG4gICAgICAgICAgICB0aGlzLndlaWdodHNbaV0gKz0gdGhpcy5jdXJyZW50RGF0YVtpXSAqIGRlbHRhICsgZGVsdGFXZWlnaHRzO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50aHJlc2hvbGQgKz0gZGVsdGE7XG4gICAgfVxuXG4gICAgb3V0cHV0KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnN5bmFwdGljUHJvY2Vzc29yLmFjdGl2YXRpb25GdW5jdGlvbi5hY3RpdmF0aW9uKFxuICAgICAgICAgICAgdGhpcy5zeW5hcHNlXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJvY2VzcygpIHtcbiAgICAgICAgdGhpcy5zeW5hcHRpY1Byb2Nlc3Nvci5jYWxjdWxhdGVTeW5hcHNlcyh0aGlzLndlaWdodHMsIHRoaXMudGhyZXNob2xkKTtcbiAgICAgICAgdGhpcy5zeW5hcHNlID0gdGhpcy5zeW5hcHRpY1Byb2Nlc3Nvci5zeW5hcHNlO1xuXG4gICAgICAgIHJldHVybiB0aGlzLm91dHB1dCgpO1xuICAgIH1cblxuICAgIGNhbGN1bGF0ZUVycm9yT2ZPdXRwdXQob3V0cHV0RXhwZWN0ZWQpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBvdXRwdXRFeHBlY3RlZCAtIHRoaXMub3V0cHV0KCk7XG5cbiAgICAgICAgdGhpcy5jYWxjdWxhdGVFcnJvckRlcml2YXRlZChlcnJvcik7XG4gICAgfVxuXG4gICAgY2FsY3VsYXRlSGlkZGVuRXJyb3IobmV1cm9uSW5kZXgpIHtcbiAgICAgICAgbGV0IHN1bUVycm9yID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5vdXRwdXROZXVyb25zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgY29uc3QgbmV1cm9uID0gdGhpcy5vdXRwdXROZXVyb25zW2luZGV4XTtcbiAgICAgICAgICAgIHN1bUVycm9yICs9IG5ldXJvbi53ZWlnaHRzW25ldXJvbkluZGV4XSAqIG5ldXJvbi5lcnJvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlRXJyb3JEZXJpdmF0ZWQoc3VtRXJyb3IpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGNhbGN1bGF0ZUVycm9yRGVyaXZhdGVkKGZhY3RvckRlbHRhKSB7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBmYWN0b3JEZWx0YSAqIHRoaXMucHJpbWUoKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqL1xuICAgIHByaW1lKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnN5bmFwdGljUHJvY2Vzc29yLmFjdGl2YXRpb25GdW5jdGlvbi5wcmltZSh0aGlzLnN5bmFwc2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RmxvYXQ2NEFycmF5fSBiZWZvcmVXZWlnaHRzXG4gICAgICogQHJldHVybnMge3RoaXN9XG4gICAgICovXG4gICAgc2V0QmVmb3JlV2VpZ2h0cyhiZWZvcmVXZWlnaHRzOiBGbG9hdDY0QXJyYXkpOiB0aGlzIHtcbiAgICAgICAgdGhpcy5iZWZvcmVXZWlnaHRzID0gYmVmb3JlV2VpZ2h0cztcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7dGhpc31cbiAgICAgKi9cbiAgICBzZXRUaHJlc2hvbGQodGhyZXNob2xkOiBudW1iZXIgPSB0aGlzLmNyZWF0ZVdlaWdodCgpKTogdGhpcyB7XG4gICAgICAgIHRoaXMudGhyZXNob2xkID0gdGhyZXNob2xkO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEFjdGl2YXRpb25GdW5jdGlvblR5cGUgfSBmcm9tICcuL2FjdGl2YXRpb24tZnVuY3Rpb25zL2FjdGl2YXRpb24tZnVuY3Rpb24nO1xuaW1wb3J0IHsgTmV1cm9uIH0gZnJvbSAnLi9uZXVyb24nO1xuaW1wb3J0IHsgU3luYXB0aWNQcm9jZXNzb3IgfSBmcm9tICcuL3N5bmFwdGljLXByb2Nlc3Nvcic7XG5cbmV4cG9ydCBjbGFzcyBMYXllciB7XG4gICAgcHJpdmF0ZSBsYXllcnM6IE5ldXJvbltdW107XG4gICAgcHJpdmF0ZSBhY3RpdmF0aW9uRnVuY3Rpb246IEFjdGl2YXRpb25GdW5jdGlvblR5cGU7XG5cbiAgICBzeW5hcHRpY1Byb2Nlc3NvcjogU3luYXB0aWNQcm9jZXNzb3I7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgYWN0aXZhdGlvbkZ1bmN0aW9uOiBBY3RpdmF0aW9uRnVuY3Rpb25UeXBlID0gQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZS5TSUdNT0lEQUwsXG4gICAgICAgIGxlYXJuaW5nUmF0ZTogbnVtYmVyXG4gICAgKSB7XG4gICAgICAgIHRoaXMubGF5ZXJzID0gW107XG4gICAgICAgIHRoaXMuYWN0aXZhdGlvbkZ1bmN0aW9uID0gYWN0aXZhdGlvbkZ1bmN0aW9uO1xuICAgICAgICB0aGlzLnN5bmFwdGljUHJvY2Vzc29yID0gbmV3IFN5bmFwdGljUHJvY2Vzc29yKFxuICAgICAgICAgICAgdGhpcy5hY3RpdmF0aW9uRnVuY3Rpb24sXG4gICAgICAgICAgICBsZWFybmluZ1JhdGVcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbnVtYmVyTmV1cm9uc1xuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgYWRkKG51bWJlck5ldXJvbnM6IG51bWJlcikge1xuICAgICAgICBjb25zdCBsYXllciA9IHRoaXMuY3JlYXRlKG51bWJlck5ldXJvbnMpO1xuICAgICAgICBjb25zdCBpbmRleE5ld0xheWVyID0gdGhpcy5sYXllcnMucHVzaChsYXllcikgLSAxO1xuICAgICAgICBjb25zdCBiZWZvcmVMYXllciA9IHRoaXMubGF5ZXJzW2luZGV4TmV3TGF5ZXIgLSAxXTtcblxuICAgICAgICBpZiAoYmVmb3JlTGF5ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBcHVudGFyIGNvbiBjYWRhIE5ldXJvbiBkZSBsYSBudWV2YSBjYXBhIGEgbGEgYW50ZXJpb3JcbiAgICAgICAgbGF5ZXIuZm9yRWFjaCgobmV1cm9uOiBOZXVyb24pID0+IHtcbiAgICAgICAgICAgIG5ldXJvbi5pbnB1dE5ldXJvbnMgPSBiZWZvcmVMYXllcjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQXB1bnRhciBjb24gY2FkYSBuZXVyb25hIGRlIGxhIGNhcGEgYW50ZXJpb3IgYSBsYSBudWV2YSBjYXBhXG4gICAgICAgIGJlZm9yZUxheWVyLmZvckVhY2goKG5ldXJvbjogTmV1cm9uKSA9PiB7XG4gICAgICAgICAgICBuZXVyb24ub3V0cHV0TmV1cm9ucyA9IGxheWVyO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBmb3JFYWNoKGNhbGxiYWNrOiAobGF5ZXI6IE5ldXJvbltdLCBpbmRleD86IG51bWJlcikgPT4gdm9pZCkge1xuICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCB0aGlzLmxheWVycy5sZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgICAgICBjYWxsYmFjayh0aGlzLmxheWVyc1tpZHhdLCBpZHgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG4gICAgICogQHJldHVybnMge05ldXJvbltdfVxuICAgICAqL1xuICAgIGdldChpbmRleDogbnVtYmVyKTogTmV1cm9uW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXllcnNbaW5kZXhdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtOZXVyb25bXX1cbiAgICAgKi9cbiAgICBnZXRMYXN0KCk6IE5ldXJvbltdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMubGF5ZXJzLmxlbmd0aCAtIDEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG51bWJlck5ldXJvbnNcbiAgICAgKiBAcmV0dXJucyB7TmV1cm9uW119XG4gICAgICovXG4gICAgcHJpdmF0ZSBjcmVhdGUobnVtYmVyTmV1cm9uczogbnVtYmVyKTogTmV1cm9uW10ge1xuICAgICAgICBjb25zdCBsYXllcjogTmV1cm9uW10gPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck5ldXJvbnM7IGkrKykge1xuICAgICAgICAgICAgbGF5ZXJbaV0gPSBuZXcgTmV1cm9uKHRoaXMuYWN0aXZhdGlvbkZ1bmN0aW9uKTtcbiAgICAgICAgICAgIGxheWVyW2ldLnN5bmFwdGljUHJvY2Vzc29yID0gdGhpcy5zeW5hcHRpY1Byb2Nlc3NvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsYXllcjtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBBY3RpdmF0aW9uRnVuY3Rpb25UeXBlIH0gZnJvbSAnLi9hY3RpdmF0aW9uLWZ1bmN0aW9ucy9hY3RpdmF0aW9uLWZ1bmN0aW9uJztcbmltcG9ydCB7IExheWVyIH0gZnJvbSAnLi9sYXllcic7XG5pbXBvcnQgeyBOZXVyb24gfSBmcm9tICcuL25ldXJvbic7XG5cbmludGVyZmFjZSBNb2RlbFR5cGUge1xuICAgIGxheWVyczogbnVtYmVyW107XG4gICAgdGhyZXNob2xkczogbnVtYmVyW11bXTtcbiAgICB3ZWlnaHRzOiBudW1iZXJbXVtdW107XG59XG5cbmludGVyZmFjZSBCYWNrcHJvcGFnYXRpb25Db25maWcge1xuICAgIGVwb2NoczogbnVtYmVyO1xuICAgIGFjdGl2YXRpb25GdW5jdGlvbj86IEFjdGl2YXRpb25GdW5jdGlvblR5cGU7XG4gICAgbGVhcm5pbmdSYXRlPzogbnVtYmVyO1xufVxuXG4ndXNlIHN0cmljdCc7XG5leHBvcnQgY2xhc3MgQmFja3Byb3BhZ2F0aW9uIHtcbiAgICBsYXllcnM6IExheWVyO1xuICAgIGVwb2NoczogbnVtYmVyO1xuICAgIGFjdGl2YXRpb25GdW5jdGlvbjogQWN0aXZhdGlvbkZ1bmN0aW9uVHlwZTtcbiAgICBlcnJvcjogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogQGNvbnN0cnV0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgY29uZmlnOiBCYWNrcHJvcGFnYXRpb25Db25maWcgPSB7XG4gICAgICAgICAgICBlcG9jaHM6IDEwMDAsXG4gICAgICAgICAgICBhY3RpdmF0aW9uRnVuY3Rpb246IEFjdGl2YXRpb25GdW5jdGlvblR5cGUuU0lHTU9JREFMLFxuICAgICAgICAgICAgbGVhcm5pbmdSYXRlOiAwLjNcbiAgICAgICAgfVxuICAgICkge1xuICAgICAgICB0aGlzLmVycm9yID0gMDtcbiAgICAgICAgdGhpcy5hY3RpdmF0aW9uRnVuY3Rpb24gPSBjb25maWcuYWN0aXZhdGlvbkZ1bmN0aW9uO1xuICAgICAgICB0aGlzLmxheWVycyA9IG5ldyBMYXllcih0aGlzLmFjdGl2YXRpb25GdW5jdGlvbiwgY29uZmlnLmxlYXJuaW5nUmF0ZSk7XG4gICAgICAgIHRoaXMuZXBvY2hzID0gY29uZmlnLmVwb2NocztcbiAgICB9XG5cbiAgICBsZWFybihkYXRhc2V0OiBBcnJheTx7IGlucHV0OiBhbnk7IG91dHB1dDogbnVtYmVyIH0+KSB7XG4gICAgICAgIHRoaXMuZGF0YXNldElucHV0VG9GbG9hdEFycmF5KGRhdGFzZXQpO1xuXG4gICAgICAgIHRoaXMucnVuRXBvY2goZGF0YXNldCk7XG4gICAgICAgIGxldCBjb3VudGVyRXBvY2hzID0gMTtcblxuICAgICAgICB3aGlsZSAoY291bnRlckVwb2NocyA8PSB0aGlzLmVwb2Nocykge1xuICAgICAgICAgICAgY291bnRlckVwb2NocysrO1xuXG4gICAgICAgICAgICBpZiAoY291bnRlckVwb2NocyAlIDEwMDAgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmVycm9yLCBjb3VudGVyRXBvY2hzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gaWYgKHRoaXMuZXJyb3IgPCAwLjAwMDEpIHtcbiAgICAgICAgICAgIC8vICAgICBicmVhaztcbiAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgdGhpcy5ydW5FcG9jaChkYXRhc2V0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHByb2Nlc3MoZGF0YSkge1xuICAgICAgICBsZXQgb3V0cHV0czogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgZGF0YSA9IG5ldyBGbG9hdDY0QXJyYXkoZGF0YSk7XG5cbiAgICAgICAgdGhpcy5sYXllcnMuZm9yRWFjaCgobGF5ZXI6IE5ldXJvbltdKSA9PiB7XG4gICAgICAgICAgICBpZiAob3V0cHV0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBGbG9hdDY0QXJyYXkob3V0cHV0cyk7XG4gICAgICAgICAgICAgICAgb3V0cHV0cyA9IFtdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmxheWVycy5zeW5hcHRpY1Byb2Nlc3Nvci5zZXREYXRhKGRhdGEpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbGF5ZXIubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV1cm9uID0gbGF5ZXJbaW5kZXhdO1xuICAgICAgICAgICAgICAgIG91dHB1dHNbaW5kZXhdID0gbmV1cm9uLnByb2Nlc3MoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG91dHB1dHM7XG4gICAgfVxuXG4gICAgYWRkTGF5ZXIobnVtYmVyTmV1cm9uczogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMubGF5ZXJzLmFkZChudW1iZXJOZXVyb25zKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3sgbGF5ZXJzOiBudW1iZXJbXTsgd2VpZ2h0czogbnVtYmVyW11bXSB9fSBtb2RlbFxuICAgICAqIEByZXR1cm5zIHt0aGlzfVxuICAgICAqL1xuICAgIGltcG9ydE1vZGVsKG1vZGVsOiBNb2RlbFR5cGUpOiB0aGlzIHtcbiAgICAgICAgbW9kZWwubGF5ZXJzLmZvckVhY2gobGF5ZXIgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRMYXllcihsYXllcik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1vZGVsLndlaWdodHMuZm9yRWFjaCgobGF5ZXJXZWlnaHRzLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sYXllcnMuZ2V0KGluZGV4KS5mb3JFYWNoKChuZXVyb246IE5ldXJvbiwgbmV1cm9uSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXVyb25cbiAgICAgICAgICAgICAgICAgICAgLnNldFdlaWdodHMobmV3IEZsb2F0NjRBcnJheShsYXllcldlaWdodHNbbmV1cm9uSW5kZXhdKSlcbiAgICAgICAgICAgICAgICAgICAgLnNldEJlZm9yZVdlaWdodHMobmV1cm9uLndlaWdodHMuc2xpY2UoKSlcbiAgICAgICAgICAgICAgICAgICAgLnNldFRocmVzaG9sZChtb2RlbC50aHJlc2hvbGRzW2luZGV4XVtuZXVyb25JbmRleF0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtNb2RlbFR5cGV9XG4gICAgICovXG4gICAgZXhwb3J0TW9kZWwoKTogTW9kZWxUeXBlIHtcbiAgICAgICAgbGV0IG1vZGVsOiBNb2RlbFR5cGUgPSB7XG4gICAgICAgICAgICBsYXllcnM6IFtdLFxuICAgICAgICAgICAgdGhyZXNob2xkczogW10sXG4gICAgICAgICAgICB3ZWlnaHRzOiBbXVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubGF5ZXJzLmZvckVhY2gobGF5ZXIgPT4ge1xuICAgICAgICAgICAgbW9kZWwubGF5ZXJzLnB1c2gobGF5ZXIubGVuZ3RoKTtcblxuICAgICAgICAgICAgY29uc3QgaW5kZXhMYXllclRocmVzaG9sZHMgPSBtb2RlbC50aHJlc2hvbGRzLnB1c2goW10pO1xuICAgICAgICAgICAgY29uc3QgaW5kZXhMYXllcldlaWdodHMgPSBtb2RlbC53ZWlnaHRzLnB1c2goW10pO1xuXG4gICAgICAgICAgICBsZXQgbGF5ZXJUaHJlc2hvbGRzID0gbW9kZWwudGhyZXNob2xkc1tpbmRleExheWVyVGhyZXNob2xkcyAtIDFdO1xuICAgICAgICAgICAgbGV0IGxheWVyV2VpZ2h0cyA9IG1vZGVsLndlaWdodHNbaW5kZXhMYXllcldlaWdodHMgLSAxXTtcblxuICAgICAgICAgICAgbGF5ZXIuZm9yRWFjaChuZXVyb24gPT4ge1xuICAgICAgICAgICAgICAgIGxheWVyV2VpZ2h0cy5wdXNoKEFycmF5LmZyb20obmV1cm9uLndlaWdodHMpKTtcbiAgICAgICAgICAgICAgICBsYXllclRocmVzaG9sZHMucHVzaChuZXVyb24udGhyZXNob2xkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gbW9kZWw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTx7IGlucHV0OiBhbnk7IG91dHB1dDogbnVtYmVyIH0+fSBkYXRhc2V0XG4gICAgICovXG4gICAgZGF0YXNldElucHV0VG9GbG9hdEFycmF5KGRhdGFzZXQ6IEFycmF5PHsgaW5wdXQ6IGFueTsgb3V0cHV0OiBudW1iZXIgfT4pIHtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGRhdGFzZXQubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gZGF0YXNldFtpbmRleF07XG4gICAgICAgICAgICBkYXRhLmlucHV0ID0gbmV3IEZsb2F0NjRBcnJheShkYXRhLmlucHV0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcnJheTx7IGlucHV0OiBGbG9hdDY0QXJyYXk7IG91dHB1dDogbnVtYmVyIH0+fSBkYXRhc2V0XG4gICAgICovXG4gICAgcHJpdmF0ZSBydW5FcG9jaChkYXRhc2V0OiBBcnJheTx7IGlucHV0OiBGbG9hdDY0QXJyYXk7IG91dHB1dDogbnVtYmVyIH0+KSB7XG4gICAgICAgIGZvciAobGV0IGRhdGFJZHggPSAwOyBkYXRhSWR4IDwgZGF0YXNldC5sZW5ndGg7IGRhdGFJZHgrKykge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGRhdGFzZXRbZGF0YUlkeF07XG5cbiAgICAgICAgICAgIHRoaXMuZm9yd2FyZHByb3BhZ2F0aW9uKGRhdGEpO1xuICAgICAgICAgICAgdGhpcy5iYWNrcHJvcGFnYXRpb24oZGF0YS5vdXRwdXQpO1xuXG4gICAgICAgICAgICB0aGlzLmxheWVycy5mb3JFYWNoKGxheWVyID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBuZXVyb25JZHggPSAwOyBuZXVyb25JZHggPCBsYXllci5sZW5ndGg7IG5ldXJvbklkeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ldXJvbiA9IGxheWVyW25ldXJvbklkeF07XG4gICAgICAgICAgICAgICAgICAgIG5ldXJvbi5yZWNhbGN1bGF0ZVdlaWdodHMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSB7IGlucHV0LCBvdXRwdXQgfVxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgcHJpdmF0ZSBmb3J3YXJkcHJvcGFnYXRpb24oeyBpbnB1dCB9OiBhbnkpIHtcbiAgICAgICAgbGV0IG91dHB1dHMgPSBbXTtcbiAgICAgICAgbGV0IGRhdGEgPSBuZXcgRmxvYXQ2NEFycmF5KGlucHV0KTtcblxuICAgICAgICB0aGlzLmxheWVycy5mb3JFYWNoKChsYXllcjogTmV1cm9uW10pID0+IHtcbiAgICAgICAgICAgIGlmIChvdXRwdXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gbmV3IEZsb2F0NjRBcnJheShvdXRwdXRzKTtcbiAgICAgICAgICAgICAgICBvdXRwdXRzID0gW107XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMubGF5ZXJzLnN5bmFwdGljUHJvY2Vzc29yLnNldERhdGEoZGF0YSk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBsYXllci5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXVyb24gPSBsYXllcltpbmRleF07XG4gICAgICAgICAgICAgICAgb3V0cHV0c1tpbmRleF0gPSBuZXVyb24ubGVhcm4oKS5vdXRwdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3V0cHV0XG4gICAgICovXG4gICAgcHJpdmF0ZSBiYWNrcHJvcGFnYXRpb24ob3V0cHV0OiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgbGFzdExheWVyID0gdGhpcy5sYXllcnMuZ2V0TGFzdCgpO1xuICAgICAgICBsZXQgc3VtRXJyb3JzID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbGFzdExheWVyLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgY29uc3QgbmV1cm9uID0gbGFzdExheWVyW2luZGV4XTtcblxuICAgICAgICAgICAgbmV1cm9uLmNhbGN1bGF0ZUVycm9yT2ZPdXRwdXQob3V0cHV0KTtcbiAgICAgICAgICAgIG5ldXJvbi5iYWNrcHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgc3VtRXJyb3JzICs9IG5ldXJvbi5lcnJvciAqIG5ldXJvbi5lcnJvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZXJyb3IgPSBzdW1FcnJvcnMgLyAyO1xuICAgIH1cbn1cbiIsImV4cG9ydCBuYW1lc3BhY2UgU2lnbW9pZGFsIHtcbiAgICBleHBvcnQgZnVuY3Rpb24gYWN0aXZhdGlvbihzeW5hcHNlKSB7XG4gICAgICAgIHJldHVybiAxIC8gKDEgKyBNYXRoLkUgKiogLXN5bmFwc2UpO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBwcmltZShzeW5hcHNlKSB7XG4gICAgICAgIGNvbnN0IGV4ID0gTWF0aC5FICoqIHN5bmFwc2U7XG5cbiAgICAgICAgcmV0dXJuIGV4IC8gKGV4ICsgMSkgKiogMjtcbiAgICB9XG59XG4iLCJleHBvcnQgbmFtZXNwYWNlIFJlTFUge1xuICAgIGV4cG9ydCBmdW5jdGlvbiBhY3RpdmF0aW9uKHN5bmFwc2UpIHtcbiAgICAgICAgcmV0dXJuIHN5bmFwc2UgPj0gMCA/IHN5bmFwc2UgOiAwO1xuICAgIH1cbn1cbiIsImV4cG9ydCBuYW1lc3BhY2UgSHlwZXJib2xpY1RhbmdlbnQge1xuICAgIGV4cG9ydCBmdW5jdGlvbiBhY3RpdmF0aW9uKHN5bmFwc2UpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgudGFuaChzeW5hcHNlKTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gcHJpbWUoc3luYXBzZSkge1xuICAgICAgICBjb25zdCBvdXRwdXQgPSBhY3RpdmF0aW9uKHN5bmFwc2UpO1xuXG4gICAgICAgIHJldHVybiAxLjAgLSBvdXRwdXQgKiBvdXRwdXQ7XG4gICAgfVxufVxuIiwiZXhwb3J0IG5hbWVzcGFjZSBCaW5hcnkge1xuICAgIGV4cG9ydCBmdW5jdGlvbiBhY3RpdmF0aW9uKHN5bmFwc2UpIHtcbiAgICAgICAgcmV0dXJuIHN5bmFwc2UgPj0gMCA/IDEgOiAwO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFBlcmNlcHRyb24gfSBmcm9tICcuL3BlcmNlcHRyb24nO1xuaW1wb3J0IHsgQmFja3Byb3BhZ2F0aW9uIH0gZnJvbSAnLi9iYWNrcHJvcGFnYXRpb24nO1xuXG5leHBvcnQgeyBQZXJjZXB0cm9uLCBCYWNrcHJvcGFnYXRpb24gfTtcbiJdLCJzb3VyY2VSb290IjoiIn0=